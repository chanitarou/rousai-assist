<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŠ´ç½ç”³è«‹ã‚·ã‚¹ãƒ†ãƒ  - ä¼‘æ¥­è£œå„Ÿçµ¦ä»˜è«‹æ±‚æ›¸</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Hiragino Sans", "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ */
        header {
            background: linear-gradient(135deg, #004292 0%, #0066cc 100%);
            color: white;
            box-shadow: 0 4px 20px rgba(0,66,146,0.3);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: headerShimmer 3s infinite;
        }

        @keyframes headerShimmer {
            0% { left: -100%; }
            50% { left: 100%; }
            100% { left: 100%; }
        }

        .header-top {
            background: linear-gradient(135deg, #003570 0%, #002855 100%);
            padding: 0.5rem 0;
            font-size: 0.9rem;
            position: relative;
        }

        .header-top::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
        }

        .header-top-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-links a {
            color: white;
            text-decoration: none;
            margin-left: 20px;
            transition: opacity 0.3s;
        }

        .header-links a:hover {
            opacity: 0.8;
        }

        .header-main {
            padding: 1rem 0;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo h1 {
            font-size: 1.5rem;
            font-weight: normal;
        }

        .logo span {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-type {
            background-color: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        /* ãƒ–ãƒ¬ãƒƒãƒ‰ã‚¯ãƒ©ãƒ  */
        .breadcrumb {
            background: linear-gradient(135deg, #e8f0fe 0%, #f0f7ff 100%);
            padding: 0.75rem 0;
            border-bottom: 2px solid #d0d7e5;
            position: relative;
        }

        .breadcrumb::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #004292, #0066cc);
        }

        .breadcrumb-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            font-size: 0.9rem;
        }

        .breadcrumb a {
            color: #004292;
            text-decoration: none;
        }


        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 20px;
            position: relative;
            display: flex;
            gap: 2rem;
        }

        /* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .progress-nav {
            width: 280px;
            position: sticky;
            top: 20px;
            height: fit-content;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            padding: 1.5rem;
            border: 1px solid rgba(0,66,146,0.1);
        }

        .progress-nav h3 {
            margin: 0 0 1.5rem 0;
            color: #004292;
            font-size: 1.1rem;
            font-weight: 600;
            text-align: center;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f0f7ff;
        }

        .progress-step {
            display: flex;
            align-items: center;
            padding: 0.75rem 0;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .progress-step:hover {
            background: rgba(0,66,146,0.05);
        }

        .progress-step.active {
            background: linear-gradient(135deg, #e3f2fd 0%, #f0f7ff 100%);
            border-left: 4px solid #004292;
            padding-left: 1rem;
        }


        .step-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            margin-right: 1rem;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .progress-step.active .step-icon {
            background: #004292;
            color: white;
            border-color: #004292;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-size: 0.9rem;
            font-weight: 500;
            color: #333;
            margin-bottom: 0.25rem;
        }

        .step-description {
            font-size: 0.8rem;
            color: #666;
            line-height: 1.3;
        }

        .progress-step.active .step-title {
            color: #004292;
            font-weight: 600;
        }

        .progress-connector {
            position: absolute;
            left: 16px;
            top: 42px;
            bottom: -8px;
            width: 2px;
            background: #dee2e6;
        }

        .progress-step:last-child .progress-connector {
            display: none;
        }


        .progress-step.active .progress-connector {
            background: #004292;
        }

        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
        .main-content {
            flex: 1;
            min-width: 0;
        }

        /* é€šçŸ¥ã‚¨ãƒªã‚¢ */
        .notification {
            background: linear-gradient(90deg, #e3f2fd 0%, #f0f7ff 100%);
            border-left: 4px solid #004292;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 2px 12px rgba(0,66,146,0.08);
            position: relative;
        }

        .notification::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, #004292, #0066cc);
            border-radius: 0 8px 8px 0;
        }

        .notification-icon {
            font-size: 1.5rem;
        }

        /* ãƒ•ã‚©ãƒ¼ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .form-section {
            background: white;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: 1px solid rgba(0,66,146,0.1);
            position: relative;
            overflow: hidden;
        }


        .form-section h2 {
            color: #004292;
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 3px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(90deg, #004292, #0066cc) border-box;
            border-image: linear-gradient(90deg, #004292, #0066cc) 1;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
        }


        .section-icon {
            width: 20px;
            height: 20px;
            opacity: 0.8;
        }

        /* ã‚µãƒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³åŒºåˆ‡ã‚Š */
        .subsection-divider {
            margin: 2rem 0 1.5rem;
            padding-top: 2rem;
            border-top: 2px solid #f0f0f0;
            position: relative;
        }


        .subsection-divider h3 {
            color: #004292;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            position: relative;
            padding-left: 1rem;
        }


        /* ãƒ•ã‚©ãƒ¼ãƒ ã‚°ãƒ«ãƒ¼ãƒ— */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #495057;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.95rem;
        }


        .help-icon {
            display: inline-block;
            width: 18px;
            height: 18px;
            background: linear-gradient(135deg, #6c757d 0%, #868e96 100%);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 18px;
            font-size: 12px;
            cursor: help;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .help-icon:hover {
            background: linear-gradient(135deg, #004292 0%, #0066cc 100%);
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0,66,146,0.3);
        }

        .help-tooltip {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #333 0%, #495057 100%);
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 0.85rem;
            width: 220px;
            display: none;
            z-index: 9999;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
            animation: fadeIn 0.3s ease-out;
        }

        .help-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #333;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(0) translateY(10px); }
            to { opacity: 1; transform: translateX(0) translateY(0); }
        }

        .help-icon:hover .help-tooltip {
            display: block;
        }

        /* ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
        .error-message {
            color: #dc3545;
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: none;
            font-weight: 500;
        }

        .error-message.show {
            display: block;
        }

        .form-group.error input,
        .form-group.error select,
        .form-group.error textarea {
            border-color: #dc3545;
            box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.1);
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        input[type="time"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #004292;
            box-shadow: 0 0 0 3px rgba(0, 66, 146, 0.1), 0 4px 12px rgba(0,66,146,0.05);
            background: #ffffff;
            transform: translateY(-1px);
        }

        input:disabled,
        select:disabled,
        textarea:disabled {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: #6c757d;
            cursor: not-allowed;
            opacity: 0.8;
            border-color: #dee2e6;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* æ™‚åˆ»å…¥åŠ› */
        .time-input-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .time-input-group select {
            flex: 1;
        }

        /* æœŸé–“å…¥åŠ› */
        .period-input-group {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1rem;
            align-items: center;
        }

        .period-separator {
            font-weight: bold;
            color: #666;
        }

        /* åŠ´åƒä¿é™ºç•ªå·å…¥åŠ› */
        .insurance-number-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .insurance-number-group input {
            flex: none;
        }

        .insurance-number-group input:nth-child(1) {
            width: 180px; /* ãƒ¡ã‚¤ãƒ³ç•ªå·: 11æ¡ */
        }

        .insurance-number-group input:nth-child(3) {
            width: 60px; /* æç•ª: 3æ¡ */
        }

        .insurance-separator {
            font-weight: bold;
            color: #666;
            font-size: 1.2rem;
        }

        /* æ°åå…¥åŠ› */
        .name-group {
            display: flex;
            gap: 0.5rem;
        }

        .name-group input {
            flex: 1;
        }

        /* éƒµä¾¿ç•ªå·å…¥åŠ› */
        .postal-code-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .postal-code-group input {
            flex: none;
        }

        .postal-code-group input:nth-child(2) {
            width: 80px; /* å‰3æ¡ */
        }

        .postal-code-group input:nth-child(4) {
            width: 80px; /* å¾Œ4æ¡ */
        }

        /* ä½æ‰€è‡ªå‹•å…¥åŠ›ãƒœã‚¿ãƒ³ */
        .postal-address-btn {
            background: linear-gradient(135deg, #fd7e14 0%, #ff8c00 100%);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 2px 8px rgba(253,126,20,0.2);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-left: 1rem;
        }

        .postal-address-btn:hover {
            background: linear-gradient(135deg, #e8590c 0%, #fd7e14 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(253,126,20,0.3);
        }

        .postal-address-btn:disabled {
            background: linear-gradient(135deg, #6c757d 0%, #868e96 100%);
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .postal-separator {
            font-weight: bold;
            color: #666;
            font-size: 1.2rem;
        }

        .postal-mark {
            font-weight: bold;
            color: #666;
            font-size: 1.1rem;
            margin-right: 0.5rem;
        }

        /* äº‹æ¥­ä¸»æ°åå…¥åŠ› */
        .employer-name-group {
            display: flex;
            gap: 0.5rem;
        }

        .employer-name-group input:nth-child(1) {
            flex: 2; /* å½¹è· */
        }

        .employer-name-group input:nth-child(2) {
            flex: 1; /* è‹—å­— */
        }

        .employer-name-group input:nth-child(3) {
            flex: 1; /* åå‰ */
        }

        /* åŒ»å¸«æ°åå…¥åŠ› */
        .doctor-name-group {
            display: flex;
            gap: 0.5rem;
        }

        .doctor-name-group input:nth-child(1) {
            flex: 1; /* å½¹è· */
        }

        .doctor-name-group input:nth-child(2) {
            flex: 1; /* è‹—å­— */
        }

        .doctor-name-group input:nth-child(3) {
            flex: 1; /* åå‰ */
        }

        /* æŠ˜ã‚ŠãŸãŸã¿å¯èƒ½ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .collapsible-section {
            transition: all 0.3s ease;
        }

        .collapsible-section.collapsed {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px dashed #dee2e6;
            opacity: 0.7;
        }

        .collapsible-section h2 {
            cursor: pointer;
            position: relative;
            padding: 1rem 4rem 1rem 1rem;
            user-select: none;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid #dee2e6;
            border-radius: 12px;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .collapsible-section h2:hover {
            background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
            border-color: #004292;
            box-shadow: 0 4px 16px rgba(0,66,146,0.15);
        }

        .collapsible-section h2::after {
            content: 'â–¼';
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%) rotate(0deg);
            transition: all 0.3s ease;
            font-size: 1.1rem;
            background: linear-gradient(135deg, #004292 0%, #0066cc 100%);
            color: white;
            padding: 6px 10px;
            border-radius: 8px;
            font-weight: normal;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(0,66,146,0.3);
        }

        .collapsible-section:not(.collapsed) h2::after {
            transform: translateY(-50%) rotate(180deg);
            background: linear-gradient(135deg, #6c757d 0%, #868e96 100%);
            box-shadow: 0 2px 6px rgba(108,117,125,0.3);
        }

        .collapsible-section:not(.collapsed) h2 {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-color: #004292;
            box-shadow: 0 4px 16px rgba(0,66,146,0.15);
        }

        .collapsible-section.collapsed h2 {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .collapsible-content {
            overflow: hidden;
            transition: max-height 0.3s ease, opacity 0.3s ease, padding 0.3s ease;
            max-height: 2000px;
            opacity: 1;
        }

        .collapsible-section.collapsed .collapsible-content {
            max-height: 0;
            opacity: 0;
            padding-top: 0;
            padding-bottom: 0;
        }

        /* é›»è©±ç•ªå·å…¥åŠ› */
        .phone-number-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .phone-number-group input {
            flex: none;
        }

        .phone-number-group input:nth-child(1) {
            width: 80px; /* å¸‚å¤–å±€ç•ª */
        }

        .phone-number-group input:nth-child(3) {
            width: 80px; /* å¸‚å†…å±€ç•ª */
        }

        .phone-number-group input:nth-child(5) {
            width: 80px; /* åŠ å…¥è€…ç•ªå· */
        }

        .phone-separator {
            font-weight: bold;
            color: #666;
            font-size: 1.2rem;
        }

        /* ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ */
        .radio-group {
            display: flex;
            gap: 1.5rem;
            margin-top: 0.5rem;
        }

        .radio-label {
            display: flex;
            align-items: center;
            font-weight: 500;
            cursor: pointer;
            padding: 0.75rem 1.25rem;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }

        .radio-label:hover {
            background: linear-gradient(135deg, #f0f7ff 0%, #e3f2fd 100%);
            border-color: #004292;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,66,146,0.08);
        }

        .radio-label input[type="radio"] {
            margin-right: 0.5rem;
        }

        .radio-label input[type="radio"]:checked + span {
            font-weight: 600;
            color: #004292;
        }

        .radio-label:has(input[type="radio"]:checked) {
            background: linear-gradient(135deg, #e3f2fd 0%, #f0f7ff 100%);
            border-color: #004292;
            box-shadow: 0 4px 12px rgba(0,66,146,0.15);
        }














        /* ãƒœã‚¿ãƒ³ */
        .button-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
            padding-top: 2rem;
        }
        
        .btn-layout {
            background: linear-gradient(135deg, #fd7e14 0%, #ff8c00 100%);
            color: white;
            box-shadow: 0 4px 16px rgba(253,126,20,0.2);
        }

        .btn-layout:hover {
            background: linear-gradient(135deg, #e8590c 0%, #fd7e14 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(253,126,20,0.4);
        }

        .button-group {
            display: flex;
            gap: 1rem;
        }

        button {
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, #004292 0%, #0066cc 100%);
            color: white;
            box-shadow: 0 4px 16px rgba(0,66,146,0.3);
        }

        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #003570 0%, #0052a3 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,66,146,0.4);
        }

        .btn-primary:disabled {
            background: linear-gradient(135deg, #6c757d 0%, #868e96 100%);
            cursor: not-allowed;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #fd7e14 0%, #ff8c00 100%);
            color: white;
            box-shadow: 0 4px 16px rgba(253,126,20,0.2);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #e8590c 0%, #fd7e14 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(253,126,20,0.4);
        }

        .btn-outline {
            background: #1E40AF;
            color: white;
            border: 2px solid #1E40AF;
            box-shadow: 0 4px 16px rgba(30,64,175,0.2);
        }

        .btn-outline:hover {
            background: #1E3A8A;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(30,64,175,0.4);
        }

        /* åŒ»ç™‚æ©Ÿé–¢æ¤œç´¢ */
        .medical-search-container {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            margin-bottom: 1rem;
        }

        .medical-search-input {
            flex: 1;
            padding: 1rem;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }

        .medical-search-input:focus {
            outline: none;
            border-color: #004292;
            box-shadow: 0 0 0 3px rgba(0, 66, 146, 0.1), 0 4px 12px rgba(0,66,146,0.05);
            background: #ffffff;
            transform: translateY(-1px);
        }

        .medical-search-btn {
            background: #1E40AF;
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 2px 8px rgba(30,64,175,0.2);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .medical-search-btn:hover {
            background: #1E3A8A;
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(30,64,175,0.3);
        }

        .medical-results {
            background: white;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .medical-result-item {
            padding: 1rem;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .medical-result-item:hover {
            background: linear-gradient(135deg, #f0f7ff 0%, #e3f2fd 100%);
            transform: translateX(4px);
        }

        .medical-result-item:last-child {
            border-bottom: none;
        }

        .medical-result-item.selected {
            background: linear-gradient(135deg, #e3f2fd 0%, #f0f7ff 100%);
            border-left: 4px solid #004292;
        }

        .medical-result-name {
            font-weight: 600;
            color: #004292;
            margin-bottom: 0.5rem;
        }

        .medical-result-info {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.4;
        }

        .medical-result-id {
            font-size: 0.8rem;
            color: #888;
            margin-top: 0.25rem;
        }

        /* æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ« */
        .file-upload {
            border: 2px dashed #d0d7de;
            border-radius: 12px;
            padding: 3rem;
            text-align: center;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            position: relative;
            overflow: hidden;
        }

        .file-upload:hover {
            border-color: #004292;
            background: linear-gradient(135deg, #f0f7ff 0%, #e3f2fd 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0,66,146,0.1);
        }

        .file-label {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #004292 0%, #0066cc 100%);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 4px 16px rgba(0,66,146,0.3);
            font-weight: 500;
        }

        .file-label:hover {
            background: linear-gradient(135deg, #003570 0%, #0052a3 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,66,146,0.4);
        }

        input[type="file"] {
            display: none;
        }

        .file-list {
            margin-top: 1rem;
            text-align: left;
        }

        .file-item {
            padding: 1rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 8px;
            margin-top: 0.75rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #e1e8ed;
            transition: all 0.3s ease;
        }

        .file-item:hover {
            background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        /* å›è¦§ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .circulation-section {
            background: linear-gradient(135deg, #f0f7ff 0%, #e3f2fd 100%);
            padding: 2rem;
            border-radius: 12px;
            margin-top: 2rem;
            border: 2px solid #d0e3ff;
            position: relative;
            overflow: hidden;
        }

        .circulation-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #004292, #0066cc);
        }

        .circulation-title {
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #004292;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .circulation-title::before {
            content: 'ğŸ“§';
            font-size: 1.5rem;
        }

        /* ä¿å­˜çŠ¶æ…‹è¡¨ç¤º */
        .save-status {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #28a745 0%, #34ce57 100%);
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            display: none;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 8px 24px rgba(40,167,69,0.3);
            font-weight: 500;
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ */
        footer {
            background: linear-gradient(135deg, #003570 0%, #002855 100%);
            color: white;
            padding: 3rem 0;
            margin-top: 4rem;
            position: relative;
            overflow: hidden;
        }

        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #004292, #0066cc);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .footer-section h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: #fff;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section a {
            color: #ccc;
            text-decoration: none;
            display: block;
            padding: 0.25rem 0;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-bottom {
            background: linear-gradient(135deg, #002855 0%, #001f3f 100%);
            padding: 1rem 0;
            text-align: center;
            margin-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
        /* ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .loading-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #004292;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .container {
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* ãƒ•ã‚©ãƒ¼ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ£ãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .form-section {
            animation: slideInLeft 0.5s ease-out;
        }

        .form-section:nth-child(even) {
            animation: slideInRight 0.5s ease-out;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .period-input-group {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .period-separator {
                text-align: center;
            }

            .button-container {
                flex-direction: column;
                gap: 1rem;
            }

            .button-group {
                width: 100%;
                flex-direction: column;
            }

            button {
                width: 100%;
                justify-content: center;
            }

            .progress-steps {
                flex-direction: column;
                gap: 1rem;
            }

            .step:not(:last-child)::after {
                display: none;
            }

            .footer-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header>
        <div class="header-top">
            <div class="header-top-content">
                <span></span>
                <div class="header-links">
                    <a href="https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/koyou_roudou/roudoukijun/gyousei/rousai/040325-13.html" target="_blank">
                        <i class="fa-solid fa-book-open"></i>
                        è¨˜å…¥æ¡ˆå†…
                    </a>
                    <a href="#">ã‚ˆãã‚ã‚‹è³ªå•</a>
                    <a href="#">ãŠå•ã„åˆã‚ã›</a>
                </div>
            </div>
        </div>
        <div class="header-main">
            <div class="header-content">
                <div class="logo">
                    <h1>åŠ´ç½ç”³è«‹ã‚·ã‚¹ãƒ†ãƒ </h1>
                </div>
                <div class="user-info">
                    <span class="user-type">
                        <i class="fa-solid fa-user"></i>
                        è¢«ç½åŠ´åƒè€…
                    </span>
                    <button class="btn-outline" style="padding: 0.5rem 1rem;">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
                </div>
            </div>
        </div>
    </header>

    <!-- ãƒ–ãƒ¬ãƒƒãƒ‰ã‚¯ãƒ©ãƒ  -->
    <div class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="#">ãƒ›ãƒ¼ãƒ </a> &gt; <a href="#">åŠ´ç½ç”³è«‹</a> &gt; ä¼‘æ¥­è£œå„Ÿçµ¦ä»˜è«‹æ±‚æ›¸ï¼ˆç¶™ç¶šï¼‰
        </div>
    </div>


    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="container">

        <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
        <div class="progress-nav">
            <h3>å…¥åŠ›äº‹é …</h3>
            <div class="progress-step active" data-section="worker-info" onclick="navigateToSection('worker-info')">
                <div class="step-icon">1</div>
                <div class="step-content">
                    <div class="step-title">åŠ´åƒè€…æƒ…å ±</div>
                    <div class="step-description">åŸºæœ¬æƒ…å ±ã¨åŠ´åƒä¿é™ºç•ªå·</div>
                </div>
                <div class="progress-connector"></div>
            </div>
            <div class="progress-step" data-section="disaster-info" onclick="navigateToSection('disaster-info')">
                <div class="step-icon">2</div>
                <div class="step-content">
                    <div class="step-title">ç½å®³æƒ…å ±</div>
                    <div class="step-description">äº‹æ•…ç™ºç”Ÿæ—¥æ™‚ã¨è©³ç´°</div>
                </div>
                <div class="progress-connector"></div>
            </div>
            <div class="progress-step" data-section="payment-info" onclick="navigateToSection('payment-info')">
                <div class="step-icon">3</div>
                <div class="step-content">
                    <div class="step-title">æŒ¯è¾¼å…ˆæƒ…å ±</div>
                    <div class="step-description">çµ¦ä»˜é‡‘å—å–å£åº§</div>
                </div>
                <div class="progress-connector"></div>
            </div>
            <div class="progress-step" data-section="employer-section" onclick="navigateToSection('employer-section')">
                <div class="step-icon">4</div>
                <div class="step-content">
                    <div class="step-title">äº‹æ¥­ä¸»è¨˜å…¥æ¬„</div>
                    <div class="step-description">äº‹æ¥­ä¸»ã«ã‚ˆã‚‹è¨¼æ˜</div>
                </div>
                <div class="progress-connector"></div>
            </div>
            <div class="progress-step" data-section="medical-section" onclick="navigateToSection('medical-section')">
                <div class="step-icon">5</div>
                <div class="step-content">
                    <div class="step-title">åŒ»ç™‚æ©Ÿé–¢è¨˜å…¥æ¬„</div>
                    <div class="step-description">åŒ»å¸«ã«ã‚ˆã‚‹è¨ºæ–­è¨¼æ˜</div>
                </div>
                <div class="progress-connector"></div>
            </div>
            <div class="progress-step" data-section="attachment" onclick="navigateToSection('attachment')">
                <div class="step-icon">6</div>
                <div class="step-content">
                    <div class="step-title">æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«</div>
                    <div class="step-description">å¿…è¦æ›¸é¡ã®æ·»ä»˜</div>
                </div>
                <div class="progress-connector"></div>
            </div>
            <div class="progress-step" data-section="circulation" onclick="navigateToSection('circulation')">
                <div class="step-icon">7</div>
                <div class="step-content">
                    <div class="step-title">å›è¦§è¨­å®š</div>
                    <div class="step-description">äº‹æ¥­ä¸»ãƒ»åŒ»ç™‚æ©Ÿé–¢è¨­å®š</div>
                </div>
            </div>
        </div>

        <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
        <div class="main-content">
            <!-- åŠ´åƒè€…æƒ…å ± -->
            <div class="form-section" id="worker-info">
            <h2>
                <i class="fa-solid fa-user"></i>
                åŠ´åƒè€…æƒ…å ±
            </h2>
            
            <div class="form-group">
                <label>
                    åŠ´åƒä¿é™ºç•ªå·
                    <span class="help-icon">?
                        <span class="help-tooltip">éƒ½é“åºœçœŒã‚³ãƒ¼ãƒ‰2æ¡ï¼‹æ‰€æŒã‚³ãƒ¼ãƒ‰2æ¡ï¼‹åŸºå¹¹ç•ªå·6æ¡ï¼ˆãƒã‚¤ãƒ•ãƒ³ï¼‰æç•ªå·3æ¡</span>
                    </span>
                </label>
                <div class="insurance-number-group">
                    <input type="text" id="insurance-number-main" placeholder="13101123456" maxlength="11" title="éƒ½é“åºœçœŒ+æ‰€æŒ+ç®¡è½„+åŸºå¹¹ç•ªå·ï¼ˆ11æ¡ï¼‰">
                    <span class="insurance-separator">-</span>
                    <input type="text" id="insurance-number-branch" placeholder="001" maxlength="3" title="æç•ªï¼ˆ3æ¡ï¼‰">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>åŠ´åƒè€…ã®æ°å</label>
                    <div class="name-group">
                        <input type="text" id="worker-name-family" placeholder="å±±ç”°">
                        <input type="text" id="worker-name-given" placeholder="å¤ªéƒ">
                    </div>
                </div>
                <div class="form-group">
                    <label>åŠ´åƒè€…ã®æ°åï¼ˆã‚«ãƒŠï¼‰</label>
                    <div class="name-group">
                        <input type="text" id="worker-name-family-kana" placeholder="ãƒ¤ãƒãƒ€">
                        <input type="text" id="worker-name-given-kana" placeholder="ã‚¿ãƒ­ã‚¦">
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="worker-address" >åŠ´åƒè€…ã®ä½æ‰€</label>
                <div class="postal-code-group">
                    <span class="postal-mark">ã€’</span>
                    <input type="text" id="worker-postal-code-1" placeholder="123" maxlength="3">
                    <span class="postal-separator">-</span>
                    <input type="text" id="worker-postal-code-2" placeholder="4567" maxlength="4">
                    <button type="button" class="postal-address-btn" id="worker-address-lookup">
                        <i class="fa-solid fa-search"></i>
                        ä½æ‰€è‡ªå‹•å…¥åŠ›
                    </button>
                </div>
                <input type="text" id="worker-address" placeholder="ä¾‹ï¼šæ±äº¬éƒ½åƒä»£ç”°åŒºéœãŒé–¢1-2-3" style="margin-top: 0.5rem;">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>åŠ´åƒè€…ã®æ€§åˆ¥</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="gender" value="male">
                            <span>ç”·æ€§</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="gender" value="female">
                            <span>å¥³æ€§</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="birth-date" >åŠ´åƒè€…ã®ç”Ÿå¹´æœˆæ—¥</label>
                    <input type="date" id="birth-date">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="worker-job" >
                        åŠ´åƒè€…ã®è·ç¨®
                        <span class="help-icon">?
                            <span class="help-tooltip">è·ç¨®ã¯ãªã‚‹ã¹ãå…·ä½“çš„ã«ä½œæ¥­å†…å®¹ãŒåˆ†ã‹ã‚‹ã‚ˆã†ã«è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚</span>
                        </span>
                    </label>
                    <input type="text" id="worker-job" placeholder="ä¾‹ï¼šãƒˆãƒ©ãƒƒã‚¯é‹è»¢æ‰‹">
                </div>

                <div class="form-group">
                    <label for="average-wage" >
                        å¹³å‡è³ƒé‡‘
                        <span class="help-icon">?
                            <span class="help-tooltip">åˆ¥ç´™1ã€Œå¹³å‡è³ƒé‡‘ç®—å®šå†…è¨³ã€ã«ã‚ˆã£ã¦è¨ˆç®—ã•ã‚ŒãŸå¹³å‡è³ƒé‡‘é¡ã‚’è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚</span>
                        </span>
                    </label>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="number" id="average-wage" placeholder="ä¾‹ï¼š10000" style="width: 150px;">
                        <span>å††</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ç½å®³æƒ…å ± -->
        <div class="form-section" id="disaster-info">
            <h2>
                <i class="fa-solid fa-triangle-exclamation"></i>
                ç½å®³æƒ…å ±
            </h2>

            <div class="form-row">
                <div class="form-group">
                    <label for="injury-date" >è² å‚·åˆã¯ç™ºç—…å¹´æœˆæ—¥</label>
                    <input type="date" id="injury-date">
                </div>
                <div class="form-group">
                    <label>è² å‚·åˆã¯ç™ºç—…ã®æ™‚åˆ»</label>
                    <div class="time-input-group">
                        <select id="injury-hour">
                            <option value="">æ™‚</option>
                            <option value="00">00</option>
                            <option value="01">01</option>
                            <option value="02">02</option>
                            <option value="03">03</option>
                            <option value="04">04</option>
                            <option value="05">05</option>
                            <option value="06">06</option>
                            <option value="07">07</option>
                            <option value="08">08</option>
                            <option value="09">09</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                            <option value="22">22</option>
                            <option value="23">23</option>
                        </select>
                        <span>ï¼š</span>
                        <select id="injury-minute">
                            <option value="">åˆ†</option>
                            <option value="00">00</option>
                            <option value="15">15</option>
                            <option value="30">30</option>
                            <option value="45">45</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>ç™‚é¤Šã®ãŸã‚ã«åŠ´åƒã§ããªã‹ã£ãŸæœŸé–“</label>
                <div class="period-input-group">
                    <input type="date" id="rest-start-date" placeholder="é–‹å§‹æ—¥">
                    <span class="period-separator">ã€œ</span>
                    <input type="date" id="rest-end-date" placeholder="çµ‚äº†æ—¥">
                </div>
            </div>

            <div class="form-group">
                <label for="accident-details">
                    ç½å®³ã®åŸå› ã€ç™ºç”ŸçŠ¶æ³åŠã³ç™ºç”Ÿå½“æ—¥ã®å°±åŠ´ãƒ»ç™‚é¤ŠçŠ¶æ³
                    <span class="help-icon">?
                        <span class="help-tooltip">ã©ã®ã‚ˆã†ãªå ´æ‰€ã§ã€ã©ã®ã‚ˆã†ãªä½œæ¥­ã‚’ã—ã¦ã„ã‚‹ã¨ãã«ã€ã©ã®ã‚ˆã†ãªç‰©ã¾ãŸã¯ç’°å¢ƒã«ã€ã©ã®ã‚ˆã†ãªä¸å®‰å…¨ã¾ãŸã¯æœ‰å®³ãªçŠ¶æ…‹ãŒã‚ã£ã¦ã€ã©ã®ã‚ˆã†ãªç½å®³ãŒç™ºç”Ÿã—ãŸã‹ã‚’è¨˜å…¥ã—ã¦ãã ã•ã„ã€‚</span>
                    </span>
                </label>
                <textarea id="accident-details" rows="4" placeholder="ä¾‹ï¼šå½“ç¤¾ç¬¬2å€‰åº«å…¥å£ã§18ãƒªãƒƒãƒˆãƒ«å…¥ã‚Šã®ç™½ç¯æ²¹ç¼¶ã‚’å€‰åº«ã«å…¥ã‚Œã¦ä¿ç®¡ã™ã‚‹ãŸã‚ã«ã€ãƒˆãƒ©ãƒƒã‚¯ã®è·å°ã‹ã‚‰ä¸¡æ‰‹ã§æŠ±ãˆã¦1ç¼¶ãšã¤é‹æ¬ä¸­ã€ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆã®åºŠé¢ã«ã“ã¼ã‚Œã¦ã„ãŸæ²¹ã§è¶³ã‚’æ»‘ã‚‰ã›ã€ç¯æ²¹ç¼¶ã‚’è¶³ã«è½ã¨ã—ã€å·¦è¶³è…“éª¨ä¸‹ç«¯éƒ¨ã‚’éª¨æŠ˜ã—ãŸã€‚è² å‚·ã—ãŸå¾Œã¯ä¼‘æ¥­ã¨ãªã‚Šã€å½“æ—¥ä¸­ã«Aç—…é™¢ã‚’å—è¨ºã—ãŸã€‚"></textarea>
            </div>
        </div>

        <!-- æŒ¯è¾¼å…ˆæƒ…å ± -->
        <div class="form-section" id="payment-info">
            <h2>
            <i class="fa-solid fa-money-check"></i>                
            æŒ¯è¾¼å…ˆæƒ…å ±
            </h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="bank-name" >é‡‘èæ©Ÿé–¢åç§°</label>
                    <input type="text" id="bank-name" placeholder="ä¾‹ï¼šã€‡ã€‡éŠ€è¡Œ">
                </div>
                <div class="form-group">
                    <label for="branch-name" >æ”¯åº—å</label>
                    <input type="text" id="branch-name" placeholder="ä¾‹ï¼šã€‡ã€‡æ”¯åº—">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="account-number" >å£åº§ç•ªå·</label>
                    <input type="text" id="account-number" placeholder="ä¾‹ï¼š1234567">
                </div>
                <div class="form-group">
                    <label>å£åº§åç¾©äººï¼ˆã‚«ãƒŠï¼‰</label>
                    <div class="name-group">
                        <input type="text" id="account-holder-family" placeholder="ãƒ¤ãƒãƒ€">
                        <input type="text" id="account-holder-given" placeholder="ã‚¿ãƒ­ã‚¦">
                    </div>
                </div>
            </div>
        </div>

        <!-- äº‹æ¥­ä¸»è¨˜å…¥æ¬„ -->
        <div class="form-section collapsible-section collapsed" id="employer-section">
            <h2 onclick="toggleSection('employer-section')">
                <i class="fa-solid fa-industry"></i>
                äº‹æ¥­ä¸»è¨˜å…¥æ¬„
                <span class="help-icon" style="margin-left: 1rem;">?
                    <span class="help-tooltip" style="left: 40px; bottom: -10px; transform: translateX(0);">å›è¦§å¾Œã«äº‹æ¥­ä¸»ã‚‚ã—ãã¯ä»£ç†äººã®æ¨©é™ã‚’æŒã¤äººãŒå…¥åŠ›ã„ãŸã ã‘ã¾ã™ã€‚
                        <span style="position: absolute; top: 50%; left: -6px; transform: translateY(-50%); border: 6px solid transparent; border-right-color: #333;"></span>
                    </span>
                </span>
            </h2>
            
            <div class="collapsible-content">
                <div class="form-group">
                    <label for="employer-date">è¨˜å…¥æ—¥</label>
                    <input type="date" id="employer-date" disabled>
                </div>

                <div class="form-group">
                    <label for="business-name">äº‹æ¥­ã®åç§°</label>
                    <input type="text" id="business-name" placeholder="ä¾‹ï¼šæ ªå¼ä¼šç¤¾ã€‡ã€‡" disabled>
                </div>

                <div class="form-group">
                    <label for="business-address">äº‹æ¥­ã®æ‰€åœ¨åœ°</label>
                    <div class="postal-code-group">
                        <span class="postal-mark">ã€’</span>
                        <input type="text" id="business-postal-code-1" placeholder="123" maxlength="3" disabled>
                        <span class="postal-separator">-</span>
                        <input type="text" id="business-postal-code-2" placeholder="4567" maxlength="4" disabled>
                        <button type="button" class="postal-address-btn" id="business-address-lookup" disabled>
                            <i class="fa-solid fa-search"></i>
                            ä½æ‰€è‡ªå‹•å…¥åŠ›
                        </button>
                    </div>
                    <input type="text" id="business-address" placeholder="ä¾‹ï¼šæ±äº¬éƒ½ã€‡ã€‡åŒºã€‡ã€‡1-2-3" style="margin-top: 0.5rem;" disabled>
                </div>

                <div class="form-group">
                    <label>äº‹æ¥­ä¸»ã®æ°å</label>
                    <div class="employer-name-group">
                        <input type="text" id="employer-position" placeholder="ä»£è¡¨å–ç· å½¹" disabled>
                        <input type="text" id="employer-name-family" placeholder="å±±ç”°" disabled>
                        <input type="text" id="employer-name-given" placeholder="å¤ªéƒ" disabled>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>é›»è©±ç•ªå·</label>
                    <div class="phone-number-group">
                        <input type="tel" id="employer-tel-1" placeholder="03" maxlength="4" disabled>
                        <span class="phone-separator">-</span>
                        <input type="tel" id="employer-tel-2" placeholder="1234" maxlength="4" disabled>
                        <span class="phone-separator">-</span>
                        <input type="tel" id="employer-tel-3" placeholder="5678" maxlength="4" disabled>
                    </div>
                </div>
            </div>
        </div>

        <!-- åŒ»ç™‚æ©Ÿé–¢è¨˜å…¥æ¬„ -->
        <div class="form-section collapsible-section collapsed" id="medical-section">
            <h2 onclick="toggleSection('medical-section')">
                <i class="fa-solid fa-briefcase-medical"></i>
                åŒ»ç™‚æ©Ÿé–¢è¨˜å…¥æ¬„
                <span class="help-icon" style="margin-left: 1rem;">?
                    <span class="help-tooltip" style="left: 40px; bottom: -10px; transform: translateX(0);">å›è¦§å¾Œã«è¨ºç™‚æ‹…å½“è€…ã®æ¨©é™ã‚’æŒã¤äººãŒå…¥åŠ›ã„ãŸã ã‘ã¾ã™ã€‚
                        <span style="position: absolute; top: 50%; left: -6px; transform: translateY(-50%); border: 6px solid transparent; border-right-color: #333;"></span>
                    </span>
                </span>
            </h2>
            
            <div class="collapsible-content">
                <div class="form-group">
                    <label for="injury-part">å‚·ç—…ã®éƒ¨ä½åŠã³å‚·ç—…å</label>
                    <input type="text" id="injury-part" placeholder="ä¾‹ï¼šè…°éƒ¨æ‰“æ’²" disabled>
                </div>

                <div class="form-group">
                    <label>ç™‚é¤Šã®æœŸé–“</label>
                    <div class="period-input-group">
                        <input type="date" id="treatment-start-date" placeholder="é–‹å§‹æ—¥" disabled>
                        <span class="period-separator">ã€œ</span>
                        <input type="date" id="treatment-end-date" placeholder="çµ‚äº†æ—¥" disabled>
                    </div>
                </div>

                <div class="form-group">
                    <label for="treatment-days">è¨ºç™‚å®Ÿæ—¥æ•°</label>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="number" id="treatment-days" placeholder="ä¾‹ï¼š15" max="999" style="width: 120px;" disabled>
                        <span>æ—¥</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="treatment-status">ç™‚é¤Šã®ç¾æ³</label>
                    <select id="treatment-status" disabled>
                        <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                        <option value="æ²»ç™’ï¼ˆç—‡çŠ¶å›ºå®šï¼‰">æ²»ç™’ï¼ˆç—‡çŠ¶å›ºå®šï¼‰</option>
                        <option value="æ­»äº¡">æ­»äº¡</option>
                        <option value="è»¢åŒ»">è»¢åŒ»</option>
                        <option value="ä¸­æ­¢">ä¸­æ­¢</option>
                        <option value="ç¶™ç¶šä¸­">ç¶™ç¶šä¸­</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="medical-date">è¨˜å…¥æ—¥</label>
                    <input type="date" id="medical-date" disabled>
                </div>

                <div class="form-group">
                    <label for="hospital-address">ç—…é™¢åˆã¯è¨ºç™‚æ‰€ã®æ‰€åœ¨åœ°</label>
                    <div class="postal-code-group">
                        <span class="postal-mark">ã€’</span>
                        <input type="text" id="hospital-postal-code-1" placeholder="123" maxlength="3" disabled>
                        <span class="postal-separator">-</span>
                        <input type="text" id="hospital-postal-code-2" placeholder="4567" maxlength="4" disabled>
                        <button type="button" class="postal-address-btn" id="hospital-address-lookup" disabled>
                            <i class="fa-solid fa-search"></i>
                            ä½æ‰€è‡ªå‹•å…¥åŠ›
                        </button>
                    </div>
                    <input type="text" id="hospital-address" placeholder="ä¾‹ï¼šæ±äº¬éƒ½ã€‡ã€‡åŒºã€‡ã€‡2-3-4" style="margin-top: 0.5rem;" disabled>
                </div>

                <div class="form-group">
                    <label for="hospital-name">ç—…é™¢åˆã¯è¨ºç™‚æ‰€ã®åç§°</label>
                    <input type="text" id="hospital-name" placeholder="ä¾‹ï¼šã€‡ã€‡ç—…é™¢" disabled>
                </div>

                <div class="form-group">
                    <label>ç—…é™¢åˆã¯è¨ºç™‚æ‰€ã®æ‹…å½“è€…æ°å</label>
                    <div class="name-group">
                        <input type="text" id="doctor-name-family" placeholder="ç”°ä¸­" disabled>
                        <input type="text" id="doctor-name-given" placeholder="èŠ±å­" disabled>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>é›»è©±ç•ªå·</label>
                    <div class="phone-number-group">
                        <input type="tel" id="hospital-tel-1" placeholder="03" maxlength="4" disabled>
                        <span class="phone-separator">-</span>
                        <input type="tel" id="hospital-tel-2" placeholder="9876" maxlength="4" disabled>
                        <span class="phone-separator">-</span>
                        <input type="tel" id="hospital-tel-3" placeholder="5432" maxlength="4" disabled>
                    </div>
                </div>
            </div>
        </div>


        <!-- æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ« -->
        <div class="form-section" id="attachment">
            <h2>
                <i class="fa-solid fa-paperclip"></i>
                æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«
            </h2>
            <div class="file-upload">
                <label for="file-upload" class="file-label">
                    <i class="fa-solid fa-file"></i>
                    ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ
                </label>
                <input type="file" id="file-upload" multiple>
                <p style="margin-top: 1rem; color: #666;">ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã§ã‚‚ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å¯èƒ½ã§ã™</p>
                <div id="file-list" class="file-list"></div>
            </div>
        </div>

        <!-- å›è¦§è¨­å®š -->
        <div class="form-section" id="circulation">
            <h2>
                <i class="fa-solid fa-envelope"></i>
                å›è¦§è¨­å®š
            </h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="employer-email">äº‹æ¥­ä¸»ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                    <input type="email" id="employer-email" placeholder="ä¾‹ï¼šemployer@example.com">
                </div>
                <div class="form-group">
                    <label for="medical-search">
                        åŠ´ç½ä¿é™ºæŒ‡å®šåŒ»ç™‚æ©Ÿé–¢
                        <span class="help-icon">?
                            <span class="help-tooltip">ç—…é™¢åã€ä½æ‰€ã€åœ°åŸŸåãªã©ã§æ¤œç´¢ã§ãã¾ã™</span>
                        </span>
                    </label>
                    <div class="medical-search-container">
                        <input type="text" id="medical-search" class="medical-search-input" placeholder="ç—…é™¢åã€ä½æ‰€ã€åœ°åŸŸåã§æ¤œç´¢">
                        <button type="button" class="medical-search-btn" id="medical-search-btn">
                            æ¤œç´¢
                        </button>
                    </div>
                    <div id="medical-results" class="medical-results"></div>
                    <input type="hidden" id="selected-medical-id" value="">
                    <input type="hidden" id="selected-medical-name" value="">
                </div>
            </div>
            
            <div style="display: flex; justify-content: flex-end; margin-top: 1rem;">
                <button class="btn-outline" id="circulation-btn">
                    å›è¦§ä¾é ¼
                </button>
            </div>
        </div>

        <!-- ãƒœã‚¿ãƒ³ -->
        <div class="button-container">
            <button class="btn-secondary" id="save-btn">
                <i class="fa-solid fa-floppy-disk"></i>
                ä¸€æ™‚ä¿å­˜
            </button>
            <div class="button-group">
                <button class="btn-layout" id="preview-btn">
                    <i class="fa-solid fa-file-lines"></i>
                    ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¢ºèª
                </button>
                <button class="btn-primary" id="submit-btn" disabled style="position: relative;">
                    <i class="fa-solid fa-check"></i>
                    æå‡º
                    <span class="submit-tooltip" style="position: absolute; bottom: 60px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #333 0%, #495057 100%); color: white; padding: 0.75rem 1rem; border-radius: 8px; font-size: 0.85rem; width: 360px; display: none; z-index: 9999; box-shadow: 0 8px 24px rgba(0,0,0,0.2); white-space: nowrap; text-align: center;">
                        æå‡ºã¯äº‹æ¥­ä¸»ãƒ»åŒ»ç™‚æ©Ÿé–¢ã®è¨˜å…¥å¾Œã«æŠ¼ä¸‹å¯èƒ½ã¨ãªã‚Šã¾ã™
                        <span style="position: absolute; top: 100%; left: 50%; transform: translateX(-50%); border: 6px solid transparent; border-top-color: #333;"></span>
                    </span>
                </button>
            </div>
        </div>
        </div>
    </main>

    <!-- ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- ä¿å­˜çŠ¶æ…‹è¡¨ç¤º -->
    <div class="save-status" id="save-status">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        ä¿å­˜ã—ã¾ã—ãŸ
    </div>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>ç”³è«‹ã«ã¤ã„ã¦</h3>
                <ul>
                    <li><a href="https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/koyou_roudou/roudoukijun/gyousei/rousai/040325-13.html" target="_blank">ä¼‘æ¥­è£œå„Ÿçµ¦ä»˜è¨˜å…¥æ¡ˆå†…</a></li>
                    <li><a href="#">ç”³è«‹ã®æµã‚Œ</a></li>
                    <li><a href="#">å¿…è¦æ›¸é¡ä¸€è¦§</a></li>
                    <li><a href="#">ã‚ˆãã‚ã‚‹è³ªå•</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>ã‚µãƒãƒ¼ãƒˆ</h3>
                <ul>
                    <li><a href="#">æ“ä½œãƒãƒ‹ãƒ¥ã‚¢ãƒ«</a></li>
                    <li><a href="#">å‹•ç”»ã‚¬ã‚¤ãƒ‰</a></li>
                    <li><a href="#">ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ </a></li>
                    <li><a href="#">é›»è©±ç›¸è«‡çª“å£</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>é–¢é€£ãƒªãƒ³ã‚¯</h3>
                <ul>
                    <li><a href="https://www.mhlw.go.jp/" target="_blank">åšç”ŸåŠ´åƒçœ</a></li>
                    <li><a href="#">åŠ´åƒåŸºæº–ç›£ç£ç½²ä¸€è¦§</a></li>
                    <li><a href="#">åŠ´ç½ä¿é™ºåˆ¶åº¦ã«ã¤ã„ã¦</a></li>
                    <li><a href="#">å€‹äººæƒ…å ±ä¿è­·æ–¹é‡</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>ãŠå•ã„åˆã‚ã›</h3>
                <p style="color: #ccc; line-height: 1.8;">
                    <i class="fa-solid fa-phone"></i>
                    0120-XXX-XXX<br>
                    å¹³æ—¥ 9:00-17:00<br>
                    åœŸæ—¥ç¥æ—¥ãƒ»å¹´æœ«å¹´å§‹ã‚’é™¤ã
                </p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 åšç”ŸåŠ´åƒçœ åŠ´ç½ç”³è«‹ã‚·ã‚¹ãƒ†ãƒ . All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
        const fileInput = document.getElementById('file-upload');
        const fileList = document.getElementById('file-list');
        const uploadedFiles = [];

        fileInput.addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            files.forEach(file => {
                uploadedFiles.push(file);
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="2" style="vertical-align: middle; margin-right: 8px;">
                            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                            <polyline points="13 2 13 9 20 9"></polyline>
                        </svg>
                        ${file.name} (${(file.size / 1024).toFixed(2)} KB)
                    </span>
                    <button onclick="removeFile('${file.name}')" style="background: none; border: none; color: #e74c3c; cursor: pointer;">âœ•</button>
                `;
                fileList.appendChild(fileItem);
            });
        });

        // ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
        function removeFile(fileName) {
            const index = uploadedFiles.findIndex(file => file.name === fileName);
            if (index > -1) {
                uploadedFiles.splice(index, 1);
                renderFileList();
            }
        }

        function renderFileList() {
            fileList.innerHTML = '';
            uploadedFiles.forEach(file => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="2" style="vertical-align: middle; margin-right: 8px;">
                            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                            <polyline points="13 2 13 9 20 9"></polyline>
                        </svg>
                        ${file.name} (${(file.size / 1024).toFixed(2)} KB)
                    </span>
                    <button onclick="removeFile('${file.name}')" style="background: none; border: none; color: #e74c3c; cursor: pointer;">âœ•</button>
                `;
                fileList.appendChild(fileItem);
            });
        }

        // ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—
        const fileUpload = document.querySelector('.file-upload');
        
        fileUpload.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileUpload.style.borderColor = '#004292';
            fileUpload.style.backgroundColor = '#e3f2fd';
        });

        fileUpload.addEventListener('dragleave', (e) => {
            e.preventDefault();
            fileUpload.style.borderColor = '#ddd';
            fileUpload.style.backgroundColor = 'transparent';
        });

        fileUpload.addEventListener('drop', (e) => {
            e.preventDefault();
            fileUpload.style.borderColor = '#ddd';
            fileUpload.style.backgroundColor = 'transparent';
            
            const files = Array.from(e.dataTransfer.files);
            files.forEach(file => {
                uploadedFiles.push(file);
            });
            renderFileList();
        });

        // ä¿å­˜æ©Ÿèƒ½
        document.getElementById('save-btn').addEventListener('click', function() {
            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
            const loadingOverlay = document.getElementById('loading-overlay');
            loadingOverlay.classList.add('show');
            
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€APIã‚’å‘¼ã³å‡ºã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜
            setTimeout(() => {
                loadingOverlay.classList.remove('show');
                const saveStatus = document.getElementById('save-status');
                saveStatus.style.display = 'flex';
                setTimeout(() => {
                    saveStatus.style.display = 'none';
                }, 3000);
            }, 1000);
        });

        // ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°
        function validateForm() {
            let isValid = true;
            
            // æ—¢å­˜ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¯ãƒªã‚¢
            document.querySelectorAll('.error-message').forEach(msg => {
                msg.classList.remove('show');
            });
            document.querySelectorAll('.form-group.error').forEach(group => {
                group.classList.remove('error');
            });
            
            // åŠ´åƒä¿é™ºç•ªå·
            const insuranceNumberMain = document.getElementById('insurance-number-main').value;
            const insuranceNumberBranch = document.getElementById('insurance-number-branch').value;
            if (!insuranceNumberMain || !insuranceNumberBranch) {
                showError('insurance-number-main', 'åŠ´åƒä¿é™ºç•ªå·ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            // åŠ´åƒè€…ã®æ°å
            const workerNameFamily = document.getElementById('worker-name-family').value;
            const workerNameGiven = document.getElementById('worker-name-given').value;
            if (!workerNameFamily || !workerNameGiven) {
                showError('worker-name-family', 'åŠ´åƒè€…ã®æ°åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            // åŠ´åƒè€…ã®æ°åï¼ˆã‚«ãƒŠï¼‰
            const workerNameFamilyKana = document.getElementById('worker-name-family-kana').value;
            const workerNameGivenKana = document.getElementById('worker-name-given-kana').value;
            if (!workerNameFamilyKana || !workerNameGivenKana) {
                showError('worker-name-family-kana', 'åŠ´åƒè€…ã®æ°åï¼ˆã‚«ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            // éƒµä¾¿ç•ªå·
            const postalCode1 = document.getElementById('worker-postal-code-1').value;
            const postalCode2 = document.getElementById('worker-postal-code-2').value;
            if (!postalCode1 || !postalCode2) {
                showError('worker-postal-code-1', 'éƒµä¾¿ç•ªå·ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            // åŠ´åƒè€…ã®ä½æ‰€
            const workerAddress = document.getElementById('worker-address').value;
            if (!workerAddress) {
                showError('worker-address', 'åŠ´åƒè€…ã®ä½æ‰€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            // åŠ´åƒè€…ã®æ€§åˆ¥
            const gender = document.querySelector('input[name="gender"]:checked');
            if (!gender) {
                // æ€§åˆ¥ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®è¦ªè¦ç´ ã‚’æ¢ã—ã¦ã‚¨ãƒ©ãƒ¼ã‚’è¡¨ç¤º
                const genderRadio = document.querySelector('input[name="gender"]');
                if (genderRadio) {
                    const formGroup = genderRadio.closest('.form-group');
                    if (formGroup) {
                        formGroup.classList.add('error');
                        let errorMsg = formGroup.querySelector('.error-message');
                        if (!errorMsg) {
                            errorMsg = document.createElement('div');
                            errorMsg.className = 'error-message';
                            formGroup.appendChild(errorMsg);
                        }
                        errorMsg.textContent = 'åŠ´åƒè€…ã®æ€§åˆ¥ã‚’é¸æŠã—ã¦ãã ã•ã„';
                        errorMsg.classList.add('show');
                    }
                }
                isValid = false;
            }
            
            // åŠ´åƒè€…ã®ç”Ÿå¹´æœˆæ—¥
            const birthDate = document.getElementById('birth-date');
            if (birthDate && !birthDate.value) {
                showError('birth-date', 'åŠ´åƒè€…ã®ç”Ÿå¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            // è² å‚·åˆã¯ç™ºç—…å¹´æœˆæ—¥
            const injuryDate = document.getElementById('injury-date');
            if (injuryDate && !injuryDate.value) {
                showError('injury-date', 'è² å‚·åˆã¯ç™ºç—…å¹´æœˆæ—¥ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            // ç™‚é¤Šã®ãŸã‚ã«åŠ´åƒã§ããªã‹ã£ãŸæœŸé–“
            const restStartDate = document.getElementById('rest-start-date');
            const restEndDate = document.getElementById('rest-end-date');
            if (restStartDate && restEndDate && (!restStartDate.value || !restEndDate.value)) {
                showError('rest-start-date', 'ç™‚é¤Šã®ãŸã‚ã«åŠ´åƒã§ããªã‹ã£ãŸæœŸé–“ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            // åŠ´åƒè€…ã®è·ç¨®
            const workerJob = document.getElementById('worker-job');
            if (workerJob && !workerJob.value) {
                showError('worker-job', 'åŠ´åƒè€…ã®è·ç¨®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            // å¹³å‡è³ƒé‡‘
            const averageWage = document.getElementById('average-wage');
            if (averageWage && !averageWage.value) {
                showError('average-wage', 'å¹³å‡è³ƒé‡‘ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            // è² å‚·åˆã¯ç™ºç—…ã®æ™‚åˆ»
            const injuryHour = document.getElementById('injury-hour');
            const injuryMinute = document.getElementById('injury-minute');
            if (injuryHour && injuryMinute && (!injuryHour.value || !injuryMinute.value)) {
                showError('injury-hour', 'è² å‚·åˆã¯ç™ºç—…ã®æ™‚åˆ»ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            // ç½å®³ã®åŸå› ã€ç™ºç”ŸçŠ¶æ³åŠã³ç™ºç”Ÿå½“æ—¥ã®å°±åŠ´ãƒ»ç™‚é¤ŠçŠ¶æ³
            const accidentDetails = document.getElementById('accident-details');
            if (accidentDetails && !accidentDetails.value) {
                showError('accident-details', 'ç½å®³ã®åŸå› ã€ç™ºç”ŸçŠ¶æ³åŠã³ç™ºç”Ÿå½“æ—¥ã®å°±åŠ´ãƒ»ç™‚é¤ŠçŠ¶æ³ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            // æŒ¯è¾¼å…ˆæƒ…å ±
            const bankName = document.getElementById('bank-name');
            const branchName = document.getElementById('branch-name');
            const accountNumber = document.getElementById('account-number');
            const accountHolderFamily = document.getElementById('account-holder-family');
            const accountHolderGiven = document.getElementById('account-holder-given');
            
            if (bankName && !bankName.value) {
                showError('bank-name', 'é‡‘èæ©Ÿé–¢åç§°ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            if (branchName && !branchName.value) {
                showError('branch-name', 'æ”¯åº—åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            if (accountNumber && !accountNumber.value) {
                showError('account-number', 'å£åº§ç•ªå·ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            if (accountHolderFamily && accountHolderGiven && (!accountHolderFamily.value || !accountHolderGiven.value)) {
                showError('account-holder-family', 'å£åº§åç¾©äººï¼ˆã‚«ãƒŠï¼‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            // å›è¦§è¨­å®š
            const employerEmail = document.getElementById('employer-email');
            const selectedMedicalName = document.getElementById('selected-medical-name');
            
            if (employerEmail && !employerEmail.value) {
                showError('employer-email', 'äº‹æ¥­ä¸»ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            } else if (employerEmail && employerEmail.value && !isValidEmail(employerEmail.value)) {
                showError('employer-email', 'æœ‰åŠ¹ãªãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            if (selectedMedicalName && !selectedMedicalName.value) {
                showError('medical-search', 'åŠ´ç½ä¿é™ºæŒ‡å®šåŒ»ç™‚æ©Ÿé–¢ã‚’é¸æŠã—ã¦ãã ã•ã„');
                isValid = false;
            }
            
            return isValid;
        }
        
        function showError(fieldId, message) {
            const field = document.getElementById(fieldId);
            const formGroup = field.closest('.form-group');
            formGroup.classList.add('error');
            
            // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¦ç´ ã‚’ä½œæˆã¾ãŸã¯æ›´æ–°
            let errorMsg = formGroup.querySelector('.error-message');
            if (!errorMsg) {
                errorMsg = document.createElement('div');
                errorMsg.className = 'error-message';
                formGroup.appendChild(errorMsg);
            }
            
            errorMsg.textContent = message;
            errorMsg.classList.add('show');
        }
        
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // å›è¦§ä¾é ¼ãƒœã‚¿ãƒ³
        document.getElementById('circulation-btn').addEventListener('click', function() {
            if (!validateForm()) {
                return;
            }
            
            const employerEmail = document.getElementById('employer-email').value;
            const selectedMedicalName = document.getElementById('selected-medical-name').value;
            const selectedMedicalId = document.getElementById('selected-medical-id').value;
            
            if (!selectedMedicalName) {
                alert('åŠ´ç½ä¿é™ºæŒ‡å®šåŒ»ç™‚æ©Ÿé–¢ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
            const loadingOverlay = document.getElementById('loading-overlay');
            loadingOverlay.classList.add('show');
            
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã“ã“ã§APIã‚’å‘¼ã³å‡ºã—ã¦å›è¦§ä¾é ¼ã‚’é€ä¿¡
            setTimeout(() => {
                loadingOverlay.classList.remove('show');
                alert('å›è¦§ä¾é ¼ã‚’é€ä¿¡ã—ã¾ã—ãŸã€‚\n\näº‹æ¥­ä¸»: ' + employerEmail + '\nåŒ»ç™‚æ©Ÿé–¢: ' + selectedMedicalName + ' (æŒ‡å®šç•ªå·: ' + selectedMedicalId + ')\n\nå›è¦§å…ˆã«ãƒ¡ãƒ¼ãƒ«ãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚');
                
                // ã‚¹ãƒ†ãƒƒãƒ—ã‚’æ¬¡ã«é€²ã‚ã‚‹
                const activeStep = document.querySelector('.step.active');
                activeStep.classList.remove('active');
                activeStep.classList.add('completed');
                document.querySelectorAll('.step')[1].classList.add('active');
            }, 1500);
        });

        // æå‡ºãƒœã‚¿ãƒ³ã®ãƒ›ãƒãƒ¼å‡¦ç†
        document.getElementById('submit-btn').addEventListener('mouseenter', function() {
            if (this.disabled) {
                this.querySelector('.submit-tooltip').style.display = 'block';
            }
        });
        
        document.getElementById('submit-btn').addEventListener('mouseleave', function() {
            this.querySelector('.submit-tooltip').style.display = 'none';
        });

        // æå‡ºãƒœã‚¿ãƒ³
        document.getElementById('submit-btn').addEventListener('click', function() {
            // å¿…é ˆé …ç›®ã®ãƒã‚§ãƒƒã‚¯
            let isValid = true;
            let emptyFields = [];
            
            // åŠ´åƒä¿é™ºç•ªå·ã®ãƒã‚§ãƒƒã‚¯
            const insuranceNumberMain = document.getElementById('insurance-number-main').value;
            const insuranceNumberBranch = document.getElementById('insurance-number-branch').value;
            if (!insuranceNumberMain || !insuranceNumberBranch) {
                isValid = false;
                emptyFields.push('åŠ´åƒä¿é™ºç•ªå·');
                document.getElementById('insurance-number-main').style.borderColor = '#e74c3c';
                document.getElementById('insurance-number-branch').style.borderColor = '#e74c3c';
            } else {
                document.getElementById('insurance-number-main').style.borderColor = '#e1e8ed';
                document.getElementById('insurance-number-branch').style.borderColor = '#e1e8ed';
            }
            
            // åŠ´åƒè€…ã®æ°åã®ãƒã‚§ãƒƒã‚¯
            const familyName = document.getElementById('worker-name-family').value;
            const givenName = document.getElementById('worker-name-given').value;
            if (!familyName || !givenName) {
                isValid = false;
                emptyFields.push('åŠ´åƒè€…ã®æ°å');
                document.getElementById('worker-name-family').style.borderColor = '#e74c3c';
                document.getElementById('worker-name-given').style.borderColor = '#e74c3c';
            } else {
                document.getElementById('worker-name-family').style.borderColor = '#e1e8ed';
                document.getElementById('worker-name-given').style.borderColor = '#e1e8ed';
            }
            
            // åŠ´åƒè€…ã®æ°åï¼ˆã‚«ãƒŠï¼‰ã®ãƒã‚§ãƒƒã‚¯
            const familyNameKana = document.getElementById('worker-name-family-kana').value;
            const givenNameKana = document.getElementById('worker-name-given-kana').value;
            if (!familyNameKana || !givenNameKana) {
                isValid = false;
                emptyFields.push('åŠ´åƒè€…ã®æ°åï¼ˆã‚«ãƒŠï¼‰');
                document.getElementById('worker-name-family-kana').style.borderColor = '#e74c3c';
                document.getElementById('worker-name-given-kana').style.borderColor = '#e74c3c';
            } else {
                document.getElementById('worker-name-family-kana').style.borderColor = '#e1e8ed';
                document.getElementById('worker-name-given-kana').style.borderColor = '#e1e8ed';
            }
            
            // éƒµä¾¿ç•ªå·ã®ãƒã‚§ãƒƒã‚¯
            const postalCode1 = document.getElementById('worker-postal-code-1').value;
            const postalCode2 = document.getElementById('worker-postal-code-2').value;
            if (!postalCode1 || !postalCode2) {
                isValid = false;
                emptyFields.push('éƒµä¾¿ç•ªå·');
                document.getElementById('worker-postal-code-1').style.borderColor = '#e74c3c';
                document.getElementById('worker-postal-code-2').style.borderColor = '#e74c3c';
            } else {
                document.getElementById('worker-postal-code-1').style.borderColor = '#e1e8ed';
                document.getElementById('worker-postal-code-2').style.borderColor = '#e1e8ed';
            }
            
            // ãã®ä»–ã®å¿…é ˆé …ç›®ã®ãƒã‚§ãƒƒã‚¯
            const requiredFields = [
                'worker-address', 'injury-date', 'rest-start-date', 'rest-end-date',
                'worker-job', 'average-wage', 'accident-details',
                'bank-name', 'branch-name', 'account-number'
            ];
            
            requiredFields.forEach(fieldId => {
                const input = document.getElementById(fieldId);
                if (input && !input.value) {
                    isValid = false;
                    input.style.borderColor = '#e74c3c';
                    emptyFields.push(input.previousElementSibling.textContent || fieldId);
                } else if (input) {
                    input.style.borderColor = '#e1e8ed';
                }
            });
            
            // å£åº§åç¾©äººã®ãƒã‚§ãƒƒã‚¯
            const holderFamily = document.getElementById('account-holder-family').value;
            const holderGiven = document.getElementById('account-holder-given').value;
            if (!holderFamily || !holderGiven) {
                isValid = false;
                emptyFields.push('å£åº§åç¾©äººï¼ˆã‚«ãƒŠï¼‰');
                document.getElementById('account-holder-family').style.borderColor = '#e74c3c';
                document.getElementById('account-holder-given').style.borderColor = '#e74c3c';
            } else {
                document.getElementById('account-holder-family').style.borderColor = '#e1e8ed';
                document.getElementById('account-holder-given').style.borderColor = '#e1e8ed';
            }
            
            // ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ã®ãƒã‚§ãƒƒã‚¯
            const radioChecked = document.querySelector('input[name="gender"]:checked');
            if (!radioChecked) {
                isValid = false;
                emptyFields.push('åŠ´åƒè€…ã®æ€§åˆ¥');
            }
            
            // æ™‚åˆ»ã®å¿…é ˆãƒã‚§ãƒƒã‚¯
            const injuryHour = document.getElementById('injury-hour').value;
            const injuryMinute = document.getElementById('injury-minute').value;
            if (!injuryHour || !injuryMinute) {
                isValid = false;
                emptyFields.push('è² å‚·åˆã¯ç™ºç—…ã®æ™‚åˆ»');
                document.getElementById('injury-hour').style.borderColor = '#e74c3c';
                document.getElementById('injury-minute').style.borderColor = '#e74c3c';
            }
            
            if (!isValid) {
                alert('ä»¥ä¸‹ã®å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼š\n\n' + emptyFields.join('\n'));
                return;
            }
            
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã“ã“ã§APIã‚’å‘¼ã³å‡ºã—ã¦ç”³è«‹ã‚’é€ä¿¡
            if (confirm('ç”³è«‹å†…å®¹ã‚’ç¢ºèªã—ã¦æå‡ºã—ã¾ã™ã‹ï¼Ÿ\n\næå‡ºå¾Œã¯å†…å®¹ã®å¤‰æ›´ãŒã§ãã¾ã›ã‚“ã€‚')) {
                // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
                const loadingOverlay = document.getElementById('loading-overlay');
                loadingOverlay.classList.add('show');
                
                setTimeout(() => {
                    loadingOverlay.classList.remove('show');
                    alert('ç”³è«‹ã‚’æå‡ºã—ã¾ã—ãŸã€‚\n\nç”³è«‹ç•ªå·: R6-123456\n\nç”³è«‹å†…å®¹ã¯ç™»éŒ²ã•ã‚ŒãŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã«é€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚');
                    
                    // å®Œäº†ç”»é¢ã¸ã®é·ç§»ãªã©
                    window.location.href = '#completed';
                }, 2000);
            }
        });

        // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        const inputs = document.querySelectorAll('input, select, textarea');
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                if (!this.disabled) {
                    this.parentElement.style.transform = 'translateX(2px)';
                }
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.style.transform = 'translateX(0)';
            });
        });

        // è‡ªå‹•ä¿å­˜æ©Ÿèƒ½ï¼ˆ5åˆ†ã”ã¨ï¼‰
        setInterval(() => {
            // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€APIã‚’å‘¼ã³å‡ºã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’è‡ªå‹•ä¿å­˜
            console.log('è‡ªå‹•ä¿å­˜ã‚’å®Ÿè¡Œã—ã¾ã—ãŸ');
        }, 300000);

        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¿ã‚¤ãƒ—ã«å¿œã˜ã¦å…¥åŠ›å¯èƒ½ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’åˆ¶å¾¡
        function setUserType(userType) {
            if (userType === 'worker') {
                // è¢«ç½åŠ´åƒè€…ã¯è‡ªåˆ†ã®æƒ…å ±ã®ã¿ç·¨é›†å¯èƒ½
                document.querySelectorAll('#employer-date, #business-name, #business-address, #employer-name, #employer-tel').forEach(el => {
                    el.disabled = true;
                });
                document.querySelectorAll('#injury-part, #treatment-start-date, #treatment-end-date, #medical-progress, #medical-date, #hospital-address, #hospital-name, #doctor-name, #hospital-tel').forEach(el => {
                    el.disabled = true;
                });
            }
        }

        // æŠ˜ã‚ŠãŸãŸã¿æ©Ÿèƒ½
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            section.classList.toggle('collapsed');
        }
        
        // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
        function navigateToSection(sectionId) {
            // å¯¾è±¡ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¾ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.scrollIntoView({ behavior: 'smooth' });
                
                // äº‹æ¥­ä¸»è¨˜å…¥æ¬„ã¾ãŸã¯åŒ»ç™‚æ©Ÿé–¢è¨˜å…¥æ¬„ã®å ´åˆã€æŠ˜ã‚ŠãŸãŸã¿ã‚’å±•é–‹
                if (sectionId === 'employer-section' || sectionId === 'medical-section') {
                    if (targetSection.classList.contains('collapsed')) {
                        targetSection.classList.remove('collapsed');
                    }
                }
            }
            
            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã‚’æ›´æ–°
            document.querySelectorAll('.progress-step').forEach(step => {
                step.classList.remove('active');
            });
            
            const clickedStep = document.querySelector(`[data-section="${sectionId}"]`);
            if (clickedStep) {
                clickedStep.classList.add('active');
            }
        }

        // éƒµä¾¿ç•ªå·ã‹ã‚‰ä½æ‰€ã‚’è‡ªå‹•å–å¾—ã™ã‚‹æ©Ÿèƒ½
        async function lookupAddress(postalCode1, postalCode2, addressFieldId) {
            if (!postalCode1 || !postalCode2) {
                alert('éƒµä¾¿ç•ªå·ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            // 7æ¡ã®éƒµä¾¿ç•ªå·ã‚’ä½œæˆ
            const zipCode = postalCode1 + postalCode2;
            
            try {
                // zipcloud APIã‚’ä½¿ç”¨ã—ã¦ä½æ‰€ã‚’å–å¾—
                const response = await fetch(`https://zipcloud.ibsnet.co.jp/api/search?zipcode=${zipCode}`);
                const data = await response.json();
                
                if (data.status === 200 && data.results && data.results.length > 0) {
                    const result = data.results[0];
                    const fullAddress = result.address1 + result.address2 + result.address3;
                    
                    // ä½æ‰€ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«è‡ªå‹•å…¥åŠ›
                    document.getElementById(addressFieldId).value = fullAddress;
                    
                    // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
                    const saveStatus = document.getElementById('save-status');
                    saveStatus.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                        ä½æ‰€ã‚’è‡ªå‹•å…¥åŠ›ã—ã¾ã—ãŸ
                    `;
                    saveStatus.style.display = 'flex';
                    setTimeout(() => {
                        saveStatus.style.display = 'none';
                    }, 3000);
                } else {
                    alert('è©²å½“ã™ã‚‹ä½æ‰€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚éƒµä¾¿ç•ªå·ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
                }
            } catch (error) {
                console.error('ä½æ‰€æ¤œç´¢ã‚¨ãƒ©ãƒ¼:', error);
                alert('ä½æ‰€æ¤œç´¢ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã—ã°ã‚‰ãã—ã¦ã‹ã‚‰å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');
            }
        }
        
        // åŠ´åƒè€…ä½æ‰€ã®è‡ªå‹•å…¥åŠ›ãƒœã‚¿ãƒ³
        document.getElementById('worker-address-lookup').addEventListener('click', function() {
            const postalCode1 = document.getElementById('worker-postal-code-1').value;
            const postalCode2 = document.getElementById('worker-postal-code-2').value;
            lookupAddress(postalCode1, postalCode2, 'worker-address');
        });
        
        // äº‹æ¥­æ‰€ä½æ‰€ã®è‡ªå‹•å…¥åŠ›ãƒœã‚¿ãƒ³
        document.getElementById('business-address-lookup').addEventListener('click', function() {
            const postalCode1 = document.getElementById('business-postal-code-1').value;
            const postalCode2 = document.getElementById('business-postal-code-2').value;
            lookupAddress(postalCode1, postalCode2, 'business-address');
        });
        
        // ç—…é™¢ä½æ‰€ã®è‡ªå‹•å…¥åŠ›ãƒœã‚¿ãƒ³
        document.getElementById('hospital-address-lookup').addEventListener('click', function() {
            const postalCode1 = document.getElementById('hospital-postal-code-1').value;
            const postalCode2 = document.getElementById('hospital-postal-code-2').value;
            lookupAddress(postalCode1, postalCode2, 'hospital-address');
        });
        
        // éƒµä¾¿ç•ªå·å…¥åŠ›æ™‚ã®è‡ªå‹•ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹•
        document.getElementById('worker-postal-code-1').addEventListener('input', function() {
            if (this.value.length === 3) {
                document.getElementById('worker-postal-code-2').focus();
            }
        });
        
        document.getElementById('business-postal-code-1').addEventListener('input', function() {
            if (this.value.length === 3) {
                document.getElementById('business-postal-code-2').focus();
            }
        });
        
        document.getElementById('hospital-postal-code-1').addEventListener('input', function() {
            if (this.value.length === 3) {
                document.getElementById('hospital-postal-code-2').focus();
            }
        });
        
        // éƒµä¾¿ç•ªå·å…¥åŠ›æ™‚ã®æ•°å­—ã®ã¿åˆ¶é™
        function restrictToNumbers(inputElement) {
            inputElement.addEventListener('input', function(e) {
                this.value = this.value.replace(/[^0-9]/g, '');
            });
        }
        
        // å…¨ã¦ã®éƒµä¾¿ç•ªå·å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«æ•°å­—åˆ¶é™ã‚’é©ç”¨
        restrictToNumbers(document.getElementById('worker-postal-code-1'));
        restrictToNumbers(document.getElementById('worker-postal-code-2'));
        restrictToNumbers(document.getElementById('business-postal-code-1'));
        restrictToNumbers(document.getElementById('business-postal-code-2'));
        restrictToNumbers(document.getElementById('hospital-postal-code-1'));
        restrictToNumbers(document.getElementById('hospital-postal-code-2'));

        // åŠ´ç½ä¿é™ºæŒ‡å®šåŒ»ç™‚æ©Ÿé–¢ãƒ‡ãƒ¼ã‚¿ï¼ˆåšç”ŸåŠ´åƒçœå…¬å¼ã‚µã‚¤ãƒˆã‚ˆã‚Šï¼‰
        const medicalInstitutions = [
            {
                id: "0511757",
                name: "åŒ»ç™‚æ³•äººæ±äº¬å ‚æ¸¯ç”ºæ­¯ç§‘ã‚¯ãƒªãƒ‹ãƒƒã‚¯",
                postalCode: "011-0946",
                address: "ç§‹ç”°å¸‚åœŸå´æ¸¯ä¸­å¤®ï¼“ä¸ç›®ï¼•ï¼ï¼”ï¼",
                phone: "018-857-1040",
                region: "ç§‹ç”°çœŒ",
                type: "æ­¯ç§‘è¨ºç™‚æ‰€"
            },
            {
                id: "0832081",
                name: "æ±äº¬åŒ»ç§‘å¤§å­¦èŒ¨åŸåŒ»ç™‚ã‚»ãƒ³ã‚¿ãƒ¼",
                postalCode: "300-0395",
                address: "ç¨²æ•·éƒ¡é˜¿è¦‹ç”ºä¸­å¤®ï¼“ï¼ï¼’ï¼ï¼ï¼‘",
                phone: "029-887-1161",
                region: "èŒ¨åŸçœŒ",
                type: "ç·åˆç—…é™¢"
            },
            {
                id: "1125354",
                name: "å­¦æ ¡æ³•äººã€€ï¼³ï¼¢ï¼£æ±äº¬åŒ»ç™‚å¤§å­¦é™„å±ã€€ä¸Šé’æœ¨æ•´å½¢å¤–ç§‘",
                postalCode: "333-0845",
                address: "å·å£å¸‚ä¸Šé’æœ¨è¥¿ï¼”ï¼ï¼‘ï¼”ï¼ï¼‘ï¼’",
                phone: "048-264-3232",
                region: "åŸ¼ç‰çœŒ",
                type: "æ•´å½¢å¤–ç§‘"
            },
            {
                id: "1165411",
                name: "åŒ»ç™‚æ³•äººè²¡å›£ã€€æ±äº¬å‹¤åŠ´è€…åŒ»ç™‚ä¼šã€€ã¿ã•ã¨ãƒ¡ãƒ³ã‚¿ãƒ«ã‚¯ãƒªãƒ‹ãƒƒã‚¯",
                postalCode: "341-0038",
                address: "ä¸‰éƒ·å¸‚ä¸­å¤®ï¼‘ï¼ï¼‘ï¼–ï¼ï¼‘ã€€ã¿ã•ã¨ä¸­å¤®åŒ»ç™‚ç¦ç¥‰ãƒ“ãƒ«ï¼“ï¼¦",
                phone: "048-953-6108",
                region: "åŸ¼ç‰çœŒ",
                type: "ç²¾ç¥ç§‘è¨ºç™‚æ‰€"
            },
            {
                id: "1165925",
                name: "åŒ»ç™‚æ³•äººè²¡å›£æ±äº¬å‹¤åŠ´è€…åŒ»ç™‚ä¼šã¿ã•ã¨å”ç«‹ç—…é™¢",
                postalCode: "341-0016",
                address: "ä¸‰éƒ·å¸‚ç”°ä¸­æ–°ç”°ï¼’ï¼—ï¼“ï¼ï¼‘",
                phone: "048-959-1811",
                region: "åŸ¼ç‰çœŒ",
                type: "ç·åˆç—…é™¢"
            },
            {
                id: "1174762",
                name: "åŒ»ç™‚æ³•äººç¤¾å›£ä»å²³ä¼šè¥¿æ±äº¬æ­¯ç§‘åŒ»é™¢é£¯èƒ½åˆ†é™¢",
                postalCode: "357-0038",
                address: "é£¯èƒ½å¸‚ä»²ç”ºï¼’ï¼ï¼’é¦¬å ´ãƒ“ãƒ«ï¼‘ï¼¦",
                phone: "042-974-1033",
                region: "åŸ¼ç‰çœŒ",
                type: "æ­¯ç§‘è¨ºç™‚æ‰€"
            },
            {
                id: "1214063",
                name: "åŒ»ç™‚æ³•äººç¤¾å›£è‘µä¼šæ±äº¬ãƒ™ã‚¤å…ˆç«¯åŒ»ç™‚å¹•å¼µã‚¯ãƒªãƒ‹ãƒƒã‚¯",
                postalCode: "261-0024",
                address: "åƒè‘‰å¸‚ç¾æµœåŒºè±Šç ‚ï¼‘ï¼ï¼‘ï¼—",
                phone: "043-299-2000",
                region: "åƒè‘‰çœŒ",
                type: "è¨ºç™‚æ‰€"
            },
            {
                id: "1214349",
                name: "åŒ»ç™‚æ³•äººç¤¾å›£ã‚¯ãƒªãƒãƒ´ã‚§ã‚¤ã‚·ãƒ§ãƒ³æ±äº¬ãƒ“ã‚¸ãƒã‚¹ã‚¯ãƒªãƒ‹ãƒƒã‚¯åƒè‘‰ã‚¨ã‚­ãƒŠã‚«",
                postalCode: "260-0031",
                address: "åƒè‘‰å¸‚ä¸­å¤®åŒºæ–°åƒè‘‰ï¼‘ï¼ï¼‘ï¼ï¼‘ãƒšãƒªã‚¨åƒè‘‰ã‚¨ã‚­ãƒŠã‚«ï¼”éš",
                phone: "043-215-8111",
                region: "åƒè‘‰çœŒ",
                type: "è¨ºç™‚æ‰€"
            },
            {
                id: "1214659",
                name: "æ±äº¬ãƒ“ã‚¸ãƒã‚¹ã‚¯ãƒªãƒ‹ãƒƒã‚¯ãƒ•ã‚¡ãƒŸãƒªã‚¢ãƒšãƒªã‚¨åƒè‘‰",
                postalCode: "260-0031",
                address: "åƒè‘‰å¸‚ä¸­å¤®åŒºæ–°åƒè‘‰ï¼‘ï¼ï¼‘ï¼ï¼‘ãƒšãƒªã‚¨åƒè‘‰ï¼–éš",
                phone: "043-306-8675",
                region: "åƒè‘‰çœŒ",
                type: "è¨ºç™‚æ‰€"
            },
            {
                id: "1220021",
                name: "å­¦æ ¡æ³•äººæ±äº¬æ­¯ç§‘å¤§å­¦å¸‚å·ç·åˆç—…é™¢",
                postalCode: "272-0824",
                address: "å¸‚å·å¸‚è…é‡ï¼•ï¼ï¼‘ï¼‘ï¼ï¼‘ï¼“",
                phone: "047-322-0151",
                region: "åƒè‘‰çœŒ",
                type: "ç·åˆç—…é™¢"
            },
            {
                id: "1223771",
                name: "å­¦æ ¡æ³•äººæ±äº¬å¥³å­åŒ»ç§‘å¤§å­¦é™„å±å…«åƒä»£åŒ»ç™‚ã‚»ãƒ³ã‚¿ãƒ¼",
                postalCode: "276-8524",
                address: "å…«åƒä»£å¸‚å¤§å’Œç”°æ–°ç”°ï¼”ï¼—ï¼—ï¼ï¼™ï¼–",
                phone: "047-450-6000",
                region: "åƒè‘‰çœŒ",
                type: "ç·åˆç—…é™¢"
            },
            {
                id: "1223810",
                name: "åŒ»ç™‚æ³•äººç¤¾å›£ä¿å¥ä¼šæ±äº¬æ¹¾å²¸ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç—…é™¢",
                postalCode: "275-0026",
                address: "ç¿’å¿—é‡å¸‚è°·æ´¥ï¼”ï¼ï¼‘ï¼ï¼‘",
                phone: "047-453-9000",
                region: "åƒè‘‰çœŒ",
                type: "ãƒªãƒãƒ“ãƒªãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ç—…é™¢"
            },
            {
                id: "1224123",
                name: "æ±äº¬ãƒ™ã‚¤ãƒ»æµ¦å®‰å¸‚å·åŒ»ç™‚ã‚»ãƒ³ã‚¿ãƒ¼",
                postalCode: "279-0001",
                address: "æµ¦å®‰å¸‚å½“ä»£å³¶ï¼“ï¼ï¼”ï¼ï¼“ï¼’",
                phone: "047-351-3101",
                region: "åƒè‘‰çœŒ",
                type: "ç·åˆç—…é™¢"
            },
            {
                id: "1224646",
                name: "åŒ»ç™‚æ³•äººç¤¾å›£å¿—å‹ä¼šæ±äº¬ãƒ™ã‚¤ã‚µã‚¤ãƒ‰ã‚¯ãƒªãƒ‹ãƒƒã‚¯",
                postalCode: "273-0012",
                address: "èˆ¹æ©‹å¸‚æµœç”ºï¼’ï¼ï¼‘ï¼ï¼‘ã‚‰ã‚‰ã½ãƒ¼ã¨ï¼´ï¼ï¼«ï¼¹ï¼ï¼ï¼¢ï¼¡ï¼¹è¥¿é¤¨ï¼“éš",
                phone: "047-495-0013",
                region: "åƒè‘‰çœŒ",
                type: "è¨ºç™‚æ‰€"
            },
            {
                id: "1225863",
                name: "å­¦æ ¡æ³•äººã€€ï¼³ï¼¢ï¼£æ±äº¬åŒ»ç™‚å¤§å­¦é™„å±é«˜æ´²æ•´å½¢å¤–ç§‘",
                postalCode: "279-0023",
                address: "æµ¦å®‰å¸‚é«˜æ´²ï¼’ï¼ï¼”ï¼ï¼‘ï¼ã‚¤ãƒ³ã‚·ãƒƒãƒ—ãƒ“ãƒ«ï¼’éš",
                phone: "047-380-5050",
                region: "åƒè‘‰çœŒ",
                type: "æ•´å½¢å¤–ç§‘"
            },
            {
                id: "1230476",
                name: "åŒ»ç™‚æ³•äººç¤¾å›£èª é¦¨ä¼šã€€æ–°æ±äº¬ã‚¯ãƒªãƒ‹ãƒƒã‚¯",
                postalCode: "271-0077",
                address: "æ¾æˆ¸å¸‚æ ¹æœ¬ï¼”ï¼—ï¼“ï¼ï¼‘",
                phone: "047-366-7000",
                region: "åƒè‘‰çœŒ",
                type: "è¨ºç™‚æ‰€"
            },
            {
                id: "1230921",
                name: "åŒ»ç™‚æ³•äººæœå›£ã€€èª é¦¨ä¼šã€€æ–°æ±äº¬ã‚¯ãƒªãƒ‹ãƒƒã‚¯æ¾é£›å°",
                postalCode: "270-2215",
                address: "æ¾æˆ¸å¸‚ä¸²å´å—ç”ºï¼’ï¼—ç•ªåœ°",
                phone: "047-384-3111",
                region: "åƒè‘‰çœŒ",
                type: "è¨ºç™‚æ‰€"
            },
            {
                id: "1231103",
                name: "ï¼ˆåŒ»è²¡ï¼‰æ±äº¬å‹¤åŠ´è€…åŒ»ç™‚ä¼šæ±è‘›ç—…é™¢",
                postalCode: "270-0153",
                address: "æµå±±å¸‚ä¸­ï¼‘ï¼ï¼’",
                phone: "04-7159-1011",
                region: "åƒè‘‰çœŒ",
                type: "ç·åˆç—…é™¢"
            },
            {
                id: "1231332",
                name: "å­¦æ ¡æ³•äººæ…ˆæµå¤§å­¦æ±äº¬æ…ˆæµä¼šåŒ»ç§‘å¤§å­¦é™„å±æŸç—…é™¢",
                postalCode: "277-8567",
                address: "æŸå¸‚æŸä¸‹ï¼‘ï¼–ï¼“ï¼ï¼‘",
                phone: "04-7164-1111",
                region: "åƒè‘‰çœŒ",
                type: "ç·åˆç—…é™¢"
            },
            {
                id: "1231723",
                name: "åŒ»ç™‚æ³•äººè²¡å›£æ±äº¬å‹¤åŠ´è€…åŒ»ç™‚ä¼šé‡ç”°å—éƒ¨è¨ºç™‚æ‰€",
                postalCode: "278-0022",
                address: "é‡ç”°å¸‚å±±å´ï¼‘ï¼—ï¼“ï¼—ï¼ï¼’",
                phone: "04-7121-0171",
                region: "åƒè‘‰çœŒ",
                type: "è¨ºç™‚æ‰€"
            },
            {
                id: "1231987",
                name: "åŒ»ç™‚æ³•äººè²¡å›£æ±äº¬å‹¤åŠ´è€…åŒ»ç™‚ä¼šæ±è‘›ç—…é™¢ä»˜å±è¨ºç™‚æ‰€",
                postalCode: "270-0174",
                address: "æµå±±å¸‚ä¸‹èŠ±è¼ªï¼”ï¼ï¼™ï¼ï¼–",
                phone: "04-7158-7710",
                region: "åƒè‘‰çœŒ",
                type: "è¨ºç™‚æ‰€"
            },
            {
                id: "1232428",
                name: "åŒ»ç™‚æ³•äººç¤¾å›£èª é¦¨ä¼šã€€æ–°æ±äº¬ãƒãƒ¼ãƒˆã‚¯ãƒªãƒ‹ãƒƒã‚¯",
                postalCode: "271-0077",
                address: "æ¾æˆ¸å¸‚æ ¹æœ¬ï¼”ï¼—ï¼”ãƒ¼ï¼‘",
                phone: "047-366-3333",
                region: "åƒè‘‰çœŒ",
                type: "å°‚é–€è¨ºç™‚æ‰€"
            },
            {
                id: "1232941",
                name: "åŒ»ç™‚æ³•äººè²¡å›£æ±äº¬å‹¤åŠ´è€…åŒ»ç™‚ä¼šæ±è‘›æ­¯ç§‘",
                postalCode: "270-0174",
                address: "æµå±±å¸‚ä¸‹èŠ±è¼ªï¼”ï¼ï¼™ï¼ï¼–",
                phone: "04-7159-6775",
                region: "åƒè‘‰çœŒ",
                type: "æ­¯ç§‘è¨ºç™‚æ‰€"
            },
            {
                id: "1233386",
                name: "åŒ»ç™‚æ³•äººè²¡å›£æ±äº¬å‹¤åŠ´è€…åŒ»ç™‚ä¼šæ–°æ¾æˆ¸è¨ºç™‚æ‰€",
                postalCode: "270-0034",
                address: "æ¾æˆ¸å¸‚æ–°æ¾æˆ¸ï¼”ï¼ï¼’",
                phone: "047-343-9271",
                region: "åƒè‘‰çœŒ",
                type: "è¨ºç™‚æ‰€"
            },
            {
                id: "1233602",
                name: "åŒ»ç™‚æ³•äººç¤¾å›£èª é¦¨ä¼šã€€æ–°æ±äº¬ç—…é™¢",
                postalCode: "270-2232",
                address: "æ¾æˆ¸å¸‚å’Œåãƒ¶è°·ï¼‘ï¼’ï¼—ï¼‘ç•ªåœ°",
                phone: "047-711-8700",
                region: "åƒè‘‰çœŒ",
                type: "ç·åˆç—…é™¢"
            },
            {
                id: "1233963",
                name: "åŒ»ç™‚æ³•äººè²¡å›£æ±äº¬å‹¤åŠ´è€…åŒ»ç™‚ä¼šæ±è‘›ç—…é™¢ä»˜å±æµå±±ã‚»ãƒ³ãƒˆãƒ©ãƒ«ãƒ‘ãƒ¼ã‚¯é§…å‰è¨ºç™‚æ‰€",
                postalCode: "270-0152",
                address: "æµå±±å¸‚å‰å¹³äº•ï¼‘ï¼•ï¼•",
                phone: "04-7157-0100",
                region: "åƒè‘‰çœŒ",
                type: "è¨ºç™‚æ‰€"
            },
            {
                id: "1300016",
                name: "ç‹¬ç«‹è¡Œæ”¿æ³•äººåŠ´åƒè€…å¥åº·å®‰å…¨æ©Ÿæ§‹æ±äº¬åŠ´ç½ç—…é™¢",
                postalCode: "143-0013",
                address: "å¤§ç”°åŒºå¤§æ£®å—ï¼”ï¼ï¼‘ï¼“ï¼ï¼’ï¼‘",
                phone: "03-3742-7301",
                region: "æ±äº¬éƒ½",
                type: "åŠ´ç½ç—…é™¢"
            },
            {
                id: "1301021",
                name: "åŒ»ç™‚æ³•äººç¤¾å›£ã€€ï¼¢ï¼²ï¼¡ï¼©ï¼¶ï¼¥ã€€æ±äº¬ãƒ›ãƒ¼ãƒ ã‚¯ãƒªãƒ‹ãƒƒã‚¯",
                postalCode: "160-0011",
                address: "æ–°å®¿åŒºè‹¥è‘‰ï¼’ä¸ç›®ï¼‘ï¼’ç•ªåœ°ï¼’ã€€ãƒ¢ãƒ³ãƒ´ã‚§ãƒ¼ãƒ«å››ãƒ„è°·ï¼‘ï¼ï¼’",
                phone: "03-5990-2813",
                region: "æ±äº¬éƒ½",
                type: "è¨ºç™‚æ‰€"
            },
            {
                id: "1301179",
                name: "æ±äº¬ãƒ¡ãƒ‡ã‚£ã‚«ãƒ«ãƒ†ãƒ©ã‚¹",
                postalCode: "107-0061",
                address: "æ¸¯åŒºåŒ—é’å±±ï¼’ï¼ï¼‘ï¼“ï¼ï¼”ã€€é’å±±ï¼­ï¼¹ãƒ“ãƒ«ï¼”éš",
                phone: "03-6721-1899",
                region: "æ±äº¬éƒ½",
                type: "è¨ºç™‚æ‰€"
            },
            {
                id: "1310054",
                name: "æ±äº¬éƒ½ç¥æ´¥å³¶æ‘å›½æ°‘å¥åº·ä¿é™ºç›´å–¶è¨ºç™‚æ‰€",
                postalCode: "100-0601",
                address: "æ±äº¬éƒ½ç¥æ´¥å³¶æ‘ï¼‘ï¼ï¼ï¼™ç•ªåœ°ï¼‘",
                phone: "04992-8-1121",
                region: "æ±äº¬éƒ½",
                type: "å…¬ç«‹è¨ºç™‚æ‰€"
            }
        ];

        // åŒ»ç™‚æ©Ÿé–¢æ¤œç´¢æ©Ÿèƒ½
        function searchMedicalInstitutions(query) {
            if (!query || query.trim() === '') {
                return [];
            }
            
            const searchTerm = query.toLowerCase().trim();
            return medicalInstitutions.filter(institution => {
                return institution.name.toLowerCase().includes(searchTerm) ||
                       institution.address.toLowerCase().includes(searchTerm) ||
                       institution.region.toLowerCase().includes(searchTerm) ||
                       institution.type.toLowerCase().includes(searchTerm);
            });
        }

        // æ¤œç´¢çµæœã‚’è¡¨ç¤º
        function displayMedicalResults(results) {
            const resultsContainer = document.getElementById('medical-results');
            
            if (results.length === 0) {
                resultsContainer.innerHTML = '<div style="padding: 1rem; text-align: center; color: #666;">æ¤œç´¢çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</div>';
                resultsContainer.style.display = 'block';
                return;
            }
            
            resultsContainer.innerHTML = results.map(institution => `
                <div class="medical-result-item" data-id="${institution.id}" data-name="${institution.name}">
                    <div class="medical-result-name">${institution.name}</div>
                    <div class="medical-result-info">
                        ã€’${institution.postalCode} ${institution.address}<br>
                        TEL: ${institution.phone} | ${institution.type}
                    </div>
                    <div class="medical-result-id">æŒ‡å®šç•ªå·: ${institution.id}</div>
                </div>
            `).join('');
            
            resultsContainer.style.display = 'block';
            
            // å„çµæœé …ç›®ã«ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿½åŠ 
            resultsContainer.querySelectorAll('.medical-result-item').forEach(item => {
                item.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    const name = this.getAttribute('data-name');
                    
                    // é¸æŠçŠ¶æ…‹ã‚’æ›´æ–°
                    resultsContainer.querySelectorAll('.medical-result-item').forEach(i => i.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // éš ã—ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å€¤ã‚’è¨­å®š
                    document.getElementById('selected-medical-id').value = id;
                    document.getElementById('selected-medical-name').value = name;
                    
                    // æ¤œç´¢å…¥åŠ›æ¬„ã«é¸æŠã—ãŸåŒ»ç™‚æ©Ÿé–¢åã‚’è¡¨ç¤º
                    document.getElementById('medical-search').value = name;
                    
                    // çµæœãƒªã‚¹ãƒˆã‚’éè¡¨ç¤º
                    setTimeout(() => {
                        resultsContainer.style.display = 'none';
                    }, 200);
                    
                    // æˆåŠŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
                    const saveStatus = document.getElementById('save-status');
                    saveStatus.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                        åŒ»ç™‚æ©Ÿé–¢ã‚’é¸æŠã—ã¾ã—ãŸ
                    `;
                    saveStatus.style.display = 'flex';
                    setTimeout(() => {
                        saveStatus.style.display = 'none';
                    }, 3000);
                });
            });
        }

        // åŒ»ç™‚æ©Ÿé–¢æ¤œç´¢ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆ
        document.getElementById('medical-search-btn').addEventListener('click', function() {
            const query = document.getElementById('medical-search').value;
            const results = searchMedicalInstitutions(query);
            displayMedicalResults(results);
        });

        // æ¤œç´¢å…¥åŠ›æ¬„ã§Enterã‚­ãƒ¼ã‚’æŠ¼ã—ãŸæ™‚ã®å‡¦ç†
        document.getElementById('medical-search').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                document.getElementById('medical-search-btn').click();
            }
        });

        // æ¤œç´¢å…¥åŠ›æ¬„ä»¥å¤–ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸæ™‚ã«çµæœã‚’éè¡¨ç¤º
        document.addEventListener('click', function(e) {
            const searchContainer = document.querySelector('.medical-search-container');
            const resultsContainer = document.getElementById('medical-results');
            
            if (!searchContainer.contains(e.target) && !resultsContainer.contains(e.target)) {
                resultsContainer.style.display = 'none';
            }
        });

        // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç¢ºèªãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        document.getElementById('preview-btn').addEventListener('click', function() {
            window.open('preview.html', '_blank', 'width=1200,height=800');
        });

        // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
        function updateProgressNavigation() {
            const sections = document.querySelectorAll('.form-section');
            const progressSteps = document.querySelectorAll('.progress-step');
            
            // ç¾åœ¨ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ä½ç½®ã‚’å–å¾—
            const scrollPosition = window.scrollY + 100;
            
            let currentSection = null;
            
            // ã©ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒç¾åœ¨è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã‹ã‚’åˆ¤å®š
            sections.forEach((section, index) => {
                const rect = section.getBoundingClientRect();
                const sectionTop = rect.top + window.scrollY;
                const sectionBottom = sectionTop + rect.height;
                
                if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
                    currentSection = section.id;
                }
            });
            
            // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ã‚¹ãƒ†ãƒƒãƒ—ã®çŠ¶æ…‹ã‚’æ›´æ–°
            progressSteps.forEach(step => {
                const stepSection = step.getAttribute('data-section');
                step.classList.remove('active', 'completed');
                
                if (stepSection === currentSection) {
                    step.classList.add('active');
                } else {
                    // å®Œäº†çŠ¶æ…‹ã®åˆ¤å®šï¼ˆç°¡æ˜“ç‰ˆï¼‰
                    const section = document.getElementById(stepSection);
                    if (section) {
                        const rect = section.getBoundingClientRect();
                        const sectionTop = rect.top + window.scrollY;
                        if (scrollPosition > sectionTop + 100) {
                            step.classList.add('completed');
                        }
                    }
                }
            });
        }
        
        // ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        window.addEventListener('scroll', updateProgressNavigation);
        
        // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ã‚¹ãƒ†ãƒƒãƒ—ã‚¯ãƒªãƒƒã‚¯æ™‚ã®ã‚¹ãƒ ãƒ¼ã‚¹ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
        document.querySelectorAll('.progress-step').forEach(step => {
            step.addEventListener('click', function() {
                const targetSection = this.getAttribute('data-section');
                const targetElement = document.getElementById(targetSection);
                
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // åˆæœŸçŠ¶æ…‹ã§ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ›´æ–°
        updateProgressNavigation();

        // åˆæœŸè¨­å®šï¼ˆè¢«ç½åŠ´åƒè€…ã¨ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ï¼‰
        setUserType('worker');
    </script>
</body>
</html>