<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>労災申請システム - 休業補償給付請求書</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Hiragino Sans", "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
        }

        /* ヘッダー */
        header {
            background: linear-gradient(135deg, #004292 0%, #0066cc 100%);
            color: white;
            box-shadow: 0 4px 20px rgba(0,66,146,0.3);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: headerShimmer 3s infinite;
        }

        @keyframes headerShimmer {
            0% { left: -100%; }
            50% { left: 100%; }
            100% { left: 100%; }
        }

        .header-top {
            background: linear-gradient(135deg, #003570 0%, #002855 100%);
            padding: 0.5rem 0;
            font-size: 0.9rem;
            position: relative;
        }

        .header-top::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
        }

        .header-top-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-links a {
            color: white;
            text-decoration: none;
            margin-left: 20px;
            transition: opacity 0.3s;
        }

        .header-links a:hover {
            opacity: 0.8;
        }

        .header-main {
            padding: 1rem 0;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo h1 {
            font-size: 1.5rem;
            font-weight: normal;
        }

        .logo span {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .user-type {
            background-color: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        /* ブレッドクラム */
        .breadcrumb {
            background: linear-gradient(135deg, #e8f0fe 0%, #f0f7ff 100%);
            padding: 0.75rem 0;
            border-bottom: 2px solid #d0d7e5;
            position: relative;
        }

        .breadcrumb::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #004292, #0066cc);
        }

        .breadcrumb-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            font-size: 0.9rem;
        }

        .breadcrumb a {
            color: #004292;
            text-decoration: none;
        }


        /* メインコンテナ */
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 20px;
            position: relative;
            display: flex;
            gap: 2rem;
        }

        /* プログレスナビゲーション */
        .progress-nav {
            width: 280px;
            position: sticky;
            top: 20px;
            height: fit-content;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            padding: 1.5rem;
            border: 1px solid rgba(0,66,146,0.1);
        }

        .progress-nav h3 {
            margin: 0 0 1.5rem 0;
            color: #004292;
            font-size: 1.1rem;
            font-weight: 600;
            text-align: center;
            padding-bottom: 1rem;
            border-bottom: 2px solid #f0f7ff;
        }

        .progress-step {
            display: flex;
            align-items: center;
            padding: 0.75rem 0;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .progress-step:hover {
            background: rgba(0,66,146,0.05);
        }

        .progress-step.active {
            background: linear-gradient(135deg, #e3f2fd 0%, #f0f7ff 100%);
            border-left: 4px solid #004292;
            padding-left: 1rem;
        }


        .step-icon {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            margin-right: 1rem;
            flex-shrink: 0;
            transition: all 0.3s ease;
        }

        .progress-step.active .step-icon {
            background: #004292;
            color: white;
            border-color: #004292;
        }

        .step-content {
            flex: 1;
        }

        .step-title {
            font-size: 0.9rem;
            font-weight: 500;
            color: #333;
            margin-bottom: 0.25rem;
        }

        .step-description {
            font-size: 0.8rem;
            color: #666;
            line-height: 1.3;
        }

        .progress-step.active .step-title {
            color: #004292;
            font-weight: 600;
        }

        .progress-connector {
            position: absolute;
            left: 16px;
            top: 42px;
            bottom: -8px;
            width: 2px;
            background: #dee2e6;
        }

        .progress-step:last-child .progress-connector {
            display: none;
        }


        .progress-step.active .progress-connector {
            background: #004292;
        }

        /* メインコンテンツ */
        .main-content {
            flex: 1;
            min-width: 0;
        }

        /* 通知エリア */
        .notification {
            background: linear-gradient(90deg, #e3f2fd 0%, #f0f7ff 100%);
            border-left: 4px solid #004292;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 1rem;
            box-shadow: 0 2px 12px rgba(0,66,146,0.08);
            position: relative;
        }

        .notification::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(180deg, #004292, #0066cc);
            border-radius: 0 8px 8px 0;
        }

        .notification-icon {
            font-size: 1.5rem;
        }

        /* フォームセクション */
        .form-section {
            background: white;
            padding: 2rem;
            margin-bottom: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: 1px solid rgba(0,66,146,0.1);
            position: relative;
            overflow: hidden;
        }


        .form-section h2 {
            color: #004292;
            font-size: 1.3rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 3px solid transparent;
            background: linear-gradient(white, white) padding-box,
                        linear-gradient(90deg, #004292, #0066cc) border-box;
            border-image: linear-gradient(90deg, #004292, #0066cc) 1;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            position: relative;
        }


        .section-icon {
            width: 20px;
            height: 20px;
            opacity: 0.8;
        }

        /* サブセクション区切り */
        .subsection-divider {
            margin: 2rem 0 1.5rem;
            padding-top: 2rem;
            border-top: 2px solid #f0f0f0;
            position: relative;
        }


        .subsection-divider h3 {
            color: #004292;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            position: relative;
            padding-left: 1rem;
        }


        /* フォームグループ */
        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.75rem;
            color: #495057;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.95rem;
        }


        .help-icon {
            display: inline-block;
            width: 18px;
            height: 18px;
            background: linear-gradient(135deg, #6c757d 0%, #868e96 100%);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 18px;
            font-size: 12px;
            cursor: help;
            position: relative;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .help-icon:hover {
            background: linear-gradient(135deg, #004292 0%, #0066cc 100%);
            transform: scale(1.1);
            box-shadow: 0 4px 8px rgba(0,66,146,0.3);
        }

        .help-tooltip {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(135deg, #333 0%, #495057 100%);
            color: white;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            font-size: 0.85rem;
            width: 220px;
            display: none;
            z-index: 9999;
            box-shadow: 0 8px 24px rgba(0,0,0,0.2);
            animation: fadeIn 0.3s ease-out;
        }

        .help-tooltip::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #333;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateX(0) translateY(10px); }
            to { opacity: 1; transform: translateX(0) translateY(0); }
        }

        .help-icon:hover .help-tooltip {
            display: block;
        }

        /* エラーメッセージ */
        .error-message {
            color: #dc3545;
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: none;
            font-weight: 500;
        }

        .error-message.show {
            display: block;
        }

        .form-group.error input,
        .form-group.error select,
        .form-group.error textarea {
            border-color: #dc3545;
            box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.1);
        }

        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="date"],
        input[type="time"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #004292;
            box-shadow: 0 0 0 3px rgba(0, 66, 146, 0.1), 0 4px 12px rgba(0,66,146,0.05);
            background: #ffffff;
            transform: translateY(-1px);
        }

        input:disabled,
        select:disabled,
        textarea:disabled {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            color: #6c757d;
            cursor: not-allowed;
            opacity: 0.8;
            border-color: #dee2e6;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* 時刻入力 */
        .time-input-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .time-input-group select {
            flex: 1;
        }

        /* 期間入力 */
        .period-input-group {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 1rem;
            align-items: center;
        }

        .period-separator {
            font-weight: bold;
            color: #666;
        }

        /* 労働保険番号入力 */
        .insurance-number-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .insurance-number-group input {
            flex: none;
        }

        .insurance-number-group input:nth-child(1) {
            width: 180px; /* メイン番号: 11桁 */
        }

        .insurance-number-group input:nth-child(3) {
            width: 60px; /* 枝番: 3桁 */
        }

        .insurance-separator {
            font-weight: bold;
            color: #666;
            font-size: 1.2rem;
        }

        /* 氏名入力 */
        .name-group {
            display: flex;
            gap: 0.5rem;
        }

        .name-group input {
            flex: 1;
        }

        /* 郵便番号入力 */
        .postal-code-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .postal-code-group input {
            flex: none;
        }

        .postal-code-group input:nth-child(2) {
            width: 80px; /* 前3桁 */
        }

        .postal-code-group input:nth-child(4) {
            width: 80px; /* 後4桁 */
        }

        /* 住所自動入力ボタン */
        .postal-address-btn {
            background: linear-gradient(135deg, #fd7e14 0%, #ff8c00 100%);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 2px 8px rgba(253,126,20,0.2);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-left: 1rem;
        }

        .postal-address-btn:hover {
            background: linear-gradient(135deg, #e8590c 0%, #fd7e14 100%);
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(253,126,20,0.3);
        }

        .postal-address-btn:disabled {
            background: linear-gradient(135deg, #6c757d 0%, #868e96 100%);
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .postal-separator {
            font-weight: bold;
            color: #666;
            font-size: 1.2rem;
        }

        .postal-mark {
            font-weight: bold;
            color: #666;
            font-size: 1.1rem;
            margin-right: 0.5rem;
        }

        /* 事業主氏名入力 */
        .employer-name-group {
            display: flex;
            gap: 0.5rem;
        }

        .employer-name-group input:nth-child(1) {
            flex: 2; /* 役職 */
        }

        .employer-name-group input:nth-child(2) {
            flex: 1; /* 苗字 */
        }

        .employer-name-group input:nth-child(3) {
            flex: 1; /* 名前 */
        }

        /* 医師氏名入力 */
        .doctor-name-group {
            display: flex;
            gap: 0.5rem;
        }

        .doctor-name-group input:nth-child(1) {
            flex: 1; /* 役職 */
        }

        .doctor-name-group input:nth-child(2) {
            flex: 1; /* 苗字 */
        }

        .doctor-name-group input:nth-child(3) {
            flex: 1; /* 名前 */
        }

        /* 折りたたみ可能セクション */
        .collapsible-section {
            transition: all 0.3s ease;
        }

        .collapsible-section.collapsed {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px dashed #dee2e6;
            opacity: 0.7;
        }

        .collapsible-section h2 {
            cursor: pointer;
            position: relative;
            padding: 1rem 4rem 1rem 1rem;
            user-select: none;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border: 2px solid #dee2e6;
            border-radius: 12px;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .collapsible-section h2:hover {
            background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
            border-color: #004292;
            box-shadow: 0 4px 16px rgba(0,66,146,0.15);
        }

        .collapsible-section h2::after {
            content: '▼';
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%) rotate(0deg);
            transition: all 0.3s ease;
            font-size: 1.1rem;
            background: linear-gradient(135deg, #004292 0%, #0066cc 100%);
            color: white;
            padding: 6px 10px;
            border-radius: 8px;
            font-weight: normal;
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(0,66,146,0.3);
        }

        .collapsible-section:not(.collapsed) h2::after {
            transform: translateY(-50%) rotate(180deg);
            background: linear-gradient(135deg, #6c757d 0%, #868e96 100%);
            box-shadow: 0 2px 6px rgba(108,117,125,0.3);
        }

        .collapsible-section:not(.collapsed) h2 {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            border-color: #004292;
            box-shadow: 0 4px 16px rgba(0,66,146,0.15);
        }

        .collapsible-section.collapsed h2 {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }

        .collapsible-content {
            overflow: hidden;
            transition: max-height 0.3s ease, opacity 0.3s ease, padding 0.3s ease;
            max-height: 2000px;
            opacity: 1;
        }

        .collapsible-section.collapsed .collapsible-content {
            max-height: 0;
            opacity: 0;
            padding-top: 0;
            padding-bottom: 0;
        }

        /* 電話番号入力 */
        .phone-number-group {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .phone-number-group input {
            flex: none;
        }

        .phone-number-group input:nth-child(1) {
            width: 80px; /* 市外局番 */
        }

        .phone-number-group input:nth-child(3) {
            width: 80px; /* 市内局番 */
        }

        .phone-number-group input:nth-child(5) {
            width: 80px; /* 加入者番号 */
        }

        .phone-separator {
            font-weight: bold;
            color: #666;
            font-size: 1.2rem;
        }

        /* ラジオボタン */
        .radio-group {
            display: flex;
            gap: 1.5rem;
            margin-top: 0.5rem;
        }

        .radio-label {
            display: flex;
            align-items: center;
            font-weight: 500;
            cursor: pointer;
            padding: 0.75rem 1.25rem;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }

        .radio-label:hover {
            background: linear-gradient(135deg, #f0f7ff 0%, #e3f2fd 100%);
            border-color: #004292;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0,66,146,0.08);
        }

        .radio-label input[type="radio"] {
            margin-right: 0.5rem;
        }

        .radio-label input[type="radio"]:checked + span {
            font-weight: 600;
            color: #004292;
        }

        .radio-label:has(input[type="radio"]:checked) {
            background: linear-gradient(135deg, #e3f2fd 0%, #f0f7ff 100%);
            border-color: #004292;
            box-shadow: 0 4px 12px rgba(0,66,146,0.15);
        }














        /* ボタン */
        .button-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 2rem;
            padding-top: 2rem;
        }
        
        .btn-layout {
            background: linear-gradient(135deg, #fd7e14 0%, #ff8c00 100%);
            color: white;
            box-shadow: 0 4px 16px rgba(253,126,20,0.2);
        }

        .btn-layout:hover {
            background: linear-gradient(135deg, #e8590c 0%, #fd7e14 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(253,126,20,0.4);
        }

        .button-group {
            display: flex;
            gap: 1rem;
        }

        button {
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .btn-primary {
            background: linear-gradient(135deg, #004292 0%, #0066cc 100%);
            color: white;
            box-shadow: 0 4px 16px rgba(0,66,146,0.3);
        }

        .btn-primary:hover:not(:disabled) {
            background: linear-gradient(135deg, #003570 0%, #0052a3 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,66,146,0.4);
        }

        .btn-primary:disabled {
            background: linear-gradient(135deg, #6c757d 0%, #868e96 100%);
            cursor: not-allowed;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #fd7e14 0%, #ff8c00 100%);
            color: white;
            box-shadow: 0 4px 16px rgba(253,126,20,0.2);
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #e8590c 0%, #fd7e14 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(253,126,20,0.4);
        }

        .btn-outline {
            background: #1E40AF;
            color: white;
            border: 2px solid #1E40AF;
            box-shadow: 0 4px 16px rgba(30,64,175,0.2);
        }

        .btn-outline:hover {
            background: #1E3A8A;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(30,64,175,0.4);
        }

        /* 医療機関検索 */
        .medical-search-container {
            display: flex;
            gap: 0.5rem;
            align-items: center;
            margin-bottom: 1rem;
        }

        .medical-search-input {
            flex: 1;
            padding: 1rem;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        }

        .medical-search-input:focus {
            outline: none;
            border-color: #004292;
            box-shadow: 0 0 0 3px rgba(0, 66, 146, 0.1), 0 4px 12px rgba(0,66,146,0.05);
            background: #ffffff;
            transform: translateY(-1px);
        }

        .medical-search-btn {
            background: #1E40AF;
            color: white;
            border: none;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 2px 8px rgba(30,64,175,0.2);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .medical-search-btn:hover {
            background: #1E3A8A;
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(30,64,175,0.3);
        }

        .medical-results {
            background: white;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }

        .medical-result-item {
            padding: 1rem;
            border-bottom: 1px solid #f0f0f0;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .medical-result-item:hover {
            background: linear-gradient(135deg, #f0f7ff 0%, #e3f2fd 100%);
            transform: translateX(4px);
        }

        .medical-result-item:last-child {
            border-bottom: none;
        }

        .medical-result-item.selected {
            background: linear-gradient(135deg, #e3f2fd 0%, #f0f7ff 100%);
            border-left: 4px solid #004292;
        }

        .medical-result-name {
            font-weight: 600;
            color: #004292;
            margin-bottom: 0.5rem;
        }

        .medical-result-info {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.4;
        }

        .medical-result-id {
            font-size: 0.8rem;
            color: #888;
            margin-top: 0.25rem;
        }

        /* 添付ファイル */
        .file-upload {
            border: 2px dashed #d0d7de;
            border-radius: 12px;
            padding: 3rem;
            text-align: center;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
            position: relative;
            overflow: hidden;
        }

        .file-upload:hover {
            border-color: #004292;
            background: linear-gradient(135deg, #f0f7ff 0%, #e3f2fd 100%);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(0,66,146,0.1);
        }

        .file-label {
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #004292 0%, #0066cc 100%);
            color: white;
            border-radius: 8px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            box-shadow: 0 4px 16px rgba(0,66,146,0.3);
            font-weight: 500;
        }

        .file-label:hover {
            background: linear-gradient(135deg, #003570 0%, #0052a3 100%);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,66,146,0.4);
        }

        input[type="file"] {
            display: none;
        }

        .file-list {
            margin-top: 1rem;
            text-align: left;
        }

        .file-item {
            padding: 1rem;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 8px;
            margin-top: 0.75rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid #e1e8ed;
            transition: all 0.3s ease;
        }

        .file-item:hover {
            background: linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%);
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        /* 回覧セクション */
        .circulation-section {
            background: linear-gradient(135deg, #f0f7ff 0%, #e3f2fd 100%);
            padding: 2rem;
            border-radius: 12px;
            margin-top: 2rem;
            border: 2px solid #d0e3ff;
            position: relative;
            overflow: hidden;
        }

        .circulation-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #004292, #0066cc);
        }

        .circulation-title {
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #004292;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .circulation-title::before {
            content: '📧';
            font-size: 1.5rem;
        }

        /* 保存状態表示 */
        .save-status {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #28a745 0%, #34ce57 100%);
            color: white;
            padding: 1rem 2rem;
            border-radius: 8px;
            display: none;
            align-items: center;
            gap: 0.5rem;
            box-shadow: 0 8px 24px rgba(40,167,69,0.3);
            font-weight: 500;
            z-index: 1000;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* フッター */
        footer {
            background: linear-gradient(135deg, #003570 0%, #002855 100%);
            color: white;
            padding: 3rem 0;
            margin-top: 4rem;
            position: relative;
            overflow: hidden;
        }

        footer::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #004292, #0066cc);
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .footer-section h3 {
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: #fff;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section a {
            color: #ccc;
            text-decoration: none;
            display: block;
            padding: 0.25rem 0;
            transition: color 0.3s;
        }

        .footer-section a:hover {
            color: white;
        }

        .footer-bottom {
            background: linear-gradient(135deg, #002855 0%, #001f3f 100%);
            padding: 1rem 0;
            text-align: center;
            margin-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        /* レスポンシブ */
        /* ローディングアニメーション */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255,255,255,0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .loading-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #004292;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ページロードアニメーション */
        .container {
            animation: fadeInUp 0.6s ease-out;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* フォームセクションのステージャーアニメーション */
        .form-section {
            animation: slideInLeft 0.5s ease-out;
        }

        .form-section:nth-child(even) {
            animation: slideInRight 0.5s ease-out;
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .period-input-group {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }

            .period-separator {
                text-align: center;
            }

            .button-container {
                flex-direction: column;
                gap: 1rem;
            }

            .button-group {
                width: 100%;
                flex-direction: column;
            }

            button {
                width: 100%;
                justify-content: center;
            }

            .progress-steps {
                flex-direction: column;
                gap: 1rem;
            }

            .step:not(:last-child)::after {
                display: none;
            }

            .footer-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ヘッダー -->
    <header>
        <div class="header-top">
            <div class="header-top-content">
                <span></span>
                <div class="header-links">
                    <a href="https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/koyou_roudou/roudoukijun/gyousei/rousai/040325-13.html" target="_blank">
                        <i class="fa-solid fa-book-open"></i>
                        記入案内
                    </a>
                    <a href="#">よくある質問</a>
                    <a href="#">お問い合わせ</a>
                </div>
            </div>
        </div>
        <div class="header-main">
            <div class="header-content">
                <div class="logo">
                    <h1>労災申請システム</h1>
                </div>
                <div class="user-info">
                    <span class="user-type">
                        <i class="fa-solid fa-user"></i>
                        被災労働者
                    </span>
                    <button class="btn-outline" style="padding: 0.5rem 1rem;">ログアウト</button>
                </div>
            </div>
        </div>
    </header>

    <!-- ブレッドクラム -->
    <div class="breadcrumb">
        <div class="breadcrumb-content">
            <a href="#">ホーム</a> &gt; <a href="#">労災申請</a> &gt; 休業補償給付請求書（継続）
        </div>
    </div>


    <!-- メインコンテンツ -->
    <main class="container">

        <!-- プログレスナビゲーション -->
        <div class="progress-nav">
            <h3>入力事項</h3>
            <div class="progress-step active" data-section="worker-info" onclick="navigateToSection('worker-info')">
                <div class="step-icon">1</div>
                <div class="step-content">
                    <div class="step-title">労働者情報</div>
                    <div class="step-description">基本情報と労働保険番号</div>
                </div>
                <div class="progress-connector"></div>
            </div>
            <div class="progress-step" data-section="disaster-info" onclick="navigateToSection('disaster-info')">
                <div class="step-icon">2</div>
                <div class="step-content">
                    <div class="step-title">災害情報</div>
                    <div class="step-description">事故発生日時と詳細</div>
                </div>
                <div class="progress-connector"></div>
            </div>
            <div class="progress-step" data-section="payment-info" onclick="navigateToSection('payment-info')">
                <div class="step-icon">3</div>
                <div class="step-content">
                    <div class="step-title">振込先情報</div>
                    <div class="step-description">給付金受取口座</div>
                </div>
                <div class="progress-connector"></div>
            </div>
            <div class="progress-step" data-section="employer-section" onclick="navigateToSection('employer-section')">
                <div class="step-icon">4</div>
                <div class="step-content">
                    <div class="step-title">事業主記入欄</div>
                    <div class="step-description">事業主による証明</div>
                </div>
                <div class="progress-connector"></div>
            </div>
            <div class="progress-step" data-section="medical-section" onclick="navigateToSection('medical-section')">
                <div class="step-icon">5</div>
                <div class="step-content">
                    <div class="step-title">医療機関記入欄</div>
                    <div class="step-description">医師による診断証明</div>
                </div>
                <div class="progress-connector"></div>
            </div>
            <div class="progress-step" data-section="attachment" onclick="navigateToSection('attachment')">
                <div class="step-icon">6</div>
                <div class="step-content">
                    <div class="step-title">添付ファイル</div>
                    <div class="step-description">必要書類の添付</div>
                </div>
                <div class="progress-connector"></div>
            </div>
            <div class="progress-step" data-section="circulation" onclick="navigateToSection('circulation')">
                <div class="step-icon">7</div>
                <div class="step-content">
                    <div class="step-title">回覧設定</div>
                    <div class="step-description">事業主・医療機関設定</div>
                </div>
            </div>
        </div>

        <!-- メインコンテンツ -->
        <div class="main-content">
            <!-- 労働者情報 -->
            <div class="form-section" id="worker-info">
            <h2>
                <i class="fa-solid fa-user"></i>
                労働者情報
            </h2>
            
            <div class="form-group">
                <label>
                    労働保険番号
                    <span class="help-icon">?
                        <span class="help-tooltip">都道府県コード2桁＋所掌コード2桁＋基幹番号6桁（ハイフン）枝番号3桁</span>
                    </span>
                </label>
                <div class="insurance-number-group">
                    <input type="text" id="insurance-number-main" placeholder="13101123456" maxlength="11" title="都道府県+所掌+管轄+基幹番号（11桁）">
                    <span class="insurance-separator">-</span>
                    <input type="text" id="insurance-number-branch" placeholder="001" maxlength="3" title="枝番（3桁）">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>労働者の氏名</label>
                    <div class="name-group">
                        <input type="text" id="worker-name-family" placeholder="山田">
                        <input type="text" id="worker-name-given" placeholder="太郎">
                    </div>
                </div>
                <div class="form-group">
                    <label>労働者の氏名（カナ）</label>
                    <div class="name-group">
                        <input type="text" id="worker-name-family-kana" placeholder="ヤマダ">
                        <input type="text" id="worker-name-given-kana" placeholder="タロウ">
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="worker-address" >労働者の住所</label>
                <div class="postal-code-group">
                    <span class="postal-mark">〒</span>
                    <input type="text" id="worker-postal-code-1" placeholder="123" maxlength="3">
                    <span class="postal-separator">-</span>
                    <input type="text" id="worker-postal-code-2" placeholder="4567" maxlength="4">
                    <button type="button" class="postal-address-btn" id="worker-address-lookup">
                        <i class="fa-solid fa-search"></i>
                        住所自動入力
                    </button>
                </div>
                <input type="text" id="worker-address" placeholder="例：東京都千代田区霞が関1-2-3" style="margin-top: 0.5rem;">
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>労働者の性別</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="gender" value="male">
                            <span>男性</span>
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="gender" value="female">
                            <span>女性</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label for="birth-date" >労働者の生年月日</label>
                    <input type="date" id="birth-date">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="worker-job" >
                        労働者の職種
                        <span class="help-icon">?
                            <span class="help-tooltip">職種はなるべく具体的に作業内容が分かるように記入してください。</span>
                        </span>
                    </label>
                    <input type="text" id="worker-job" placeholder="例：トラック運転手">
                </div>

                <div class="form-group">
                    <label for="average-wage" >
                        平均賃金
                        <span class="help-icon">?
                            <span class="help-tooltip">別紙1「平均賃金算定内訳」によって計算された平均賃金額を記入してください。</span>
                        </span>
                    </label>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="number" id="average-wage" placeholder="例：10000" style="width: 150px;">
                        <span>円</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 災害情報 -->
        <div class="form-section" id="disaster-info">
            <h2>
                <i class="fa-solid fa-triangle-exclamation"></i>
                災害情報
            </h2>

            <div class="form-row">
                <div class="form-group">
                    <label for="injury-date" >負傷又は発病年月日</label>
                    <input type="date" id="injury-date">
                </div>
                <div class="form-group">
                    <label>負傷又は発病の時刻</label>
                    <div class="time-input-group">
                        <select id="injury-hour">
                            <option value="">時</option>
                            <option value="00">00</option>
                            <option value="01">01</option>
                            <option value="02">02</option>
                            <option value="03">03</option>
                            <option value="04">04</option>
                            <option value="05">05</option>
                            <option value="06">06</option>
                            <option value="07">07</option>
                            <option value="08">08</option>
                            <option value="09">09</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                            <option value="16">16</option>
                            <option value="17">17</option>
                            <option value="18">18</option>
                            <option value="19">19</option>
                            <option value="20">20</option>
                            <option value="21">21</option>
                            <option value="22">22</option>
                            <option value="23">23</option>
                        </select>
                        <span>：</span>
                        <select id="injury-minute">
                            <option value="">分</option>
                            <option value="00">00</option>
                            <option value="15">15</option>
                            <option value="30">30</option>
                            <option value="45">45</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>療養のために労働できなかった期間</label>
                <div class="period-input-group">
                    <input type="date" id="rest-start-date" placeholder="開始日">
                    <span class="period-separator">〜</span>
                    <input type="date" id="rest-end-date" placeholder="終了日">
                </div>
            </div>

            <div class="form-group">
                <label for="accident-details">
                    災害の原因、発生状況及び発生当日の就労・療養状況
                    <span class="help-icon">?
                        <span class="help-tooltip">どのような場所で、どのような作業をしているときに、どのような物または環境に、どのような不安全または有害な状態があって、どのような災害が発生したかを記入してください。</span>
                    </span>
                </label>
                <textarea id="accident-details" rows="4" placeholder="例：当社第2倉庫入口で18リットル入りの白灯油缶を倉庫に入れて保管するために、トラックの荷台から両手で抱えて1缶ずつ運搬中、コンクリートの床面にこぼれていた油で足を滑らせ、灯油缶を足に落とし、左足腓骨下端部を骨折した。負傷した後は休業となり、当日中にA病院を受診した。"></textarea>
            </div>
        </div>

        <!-- 振込先情報 -->
        <div class="form-section" id="payment-info">
            <h2>
            <i class="fa-solid fa-money-check"></i>                
            振込先情報
            </h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="bank-name" >金融機関名称</label>
                    <input type="text" id="bank-name" placeholder="例：〇〇銀行">
                </div>
                <div class="form-group">
                    <label for="branch-name" >支店名</label>
                    <input type="text" id="branch-name" placeholder="例：〇〇支店">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="account-number" >口座番号</label>
                    <input type="text" id="account-number" placeholder="例：1234567">
                </div>
                <div class="form-group">
                    <label>口座名義人（カナ）</label>
                    <div class="name-group">
                        <input type="text" id="account-holder-family" placeholder="ヤマダ">
                        <input type="text" id="account-holder-given" placeholder="タロウ">
                    </div>
                </div>
            </div>
        </div>

        <!-- 事業主記入欄 -->
        <div class="form-section collapsible-section collapsed" id="employer-section">
            <h2 onclick="toggleSection('employer-section')">
                <i class="fa-solid fa-industry"></i>
                事業主記入欄
                <span class="help-icon" style="margin-left: 1rem;">?
                    <span class="help-tooltip" style="left: 40px; bottom: -10px; transform: translateX(0);">回覧後に事業主もしくは代理人の権限を持つ人が入力いただけます。
                        <span style="position: absolute; top: 50%; left: -6px; transform: translateY(-50%); border: 6px solid transparent; border-right-color: #333;"></span>
                    </span>
                </span>
            </h2>
            
            <div class="collapsible-content">
                <div class="form-group">
                    <label for="employer-date">記入日</label>
                    <input type="date" id="employer-date" disabled>
                </div>

                <div class="form-group">
                    <label for="business-name">事業の名称</label>
                    <input type="text" id="business-name" placeholder="例：株式会社〇〇" disabled>
                </div>

                <div class="form-group">
                    <label for="business-address">事業の所在地</label>
                    <div class="postal-code-group">
                        <span class="postal-mark">〒</span>
                        <input type="text" id="business-postal-code-1" placeholder="123" maxlength="3" disabled>
                        <span class="postal-separator">-</span>
                        <input type="text" id="business-postal-code-2" placeholder="4567" maxlength="4" disabled>
                        <button type="button" class="postal-address-btn" id="business-address-lookup" disabled>
                            <i class="fa-solid fa-search"></i>
                            住所自動入力
                        </button>
                    </div>
                    <input type="text" id="business-address" placeholder="例：東京都〇〇区〇〇1-2-3" style="margin-top: 0.5rem;" disabled>
                </div>

                <div class="form-group">
                    <label>事業主の氏名</label>
                    <div class="employer-name-group">
                        <input type="text" id="employer-position" placeholder="代表取締役" disabled>
                        <input type="text" id="employer-name-family" placeholder="山田" disabled>
                        <input type="text" id="employer-name-given" placeholder="太郎" disabled>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>電話番号</label>
                    <div class="phone-number-group">
                        <input type="tel" id="employer-tel-1" placeholder="03" maxlength="4" disabled>
                        <span class="phone-separator">-</span>
                        <input type="tel" id="employer-tel-2" placeholder="1234" maxlength="4" disabled>
                        <span class="phone-separator">-</span>
                        <input type="tel" id="employer-tel-3" placeholder="5678" maxlength="4" disabled>
                    </div>
                </div>
            </div>
        </div>

        <!-- 医療機関記入欄 -->
        <div class="form-section collapsible-section collapsed" id="medical-section">
            <h2 onclick="toggleSection('medical-section')">
                <i class="fa-solid fa-briefcase-medical"></i>
                医療機関記入欄
                <span class="help-icon" style="margin-left: 1rem;">?
                    <span class="help-tooltip" style="left: 40px; bottom: -10px; transform: translateX(0);">回覧後に診療担当者の権限を持つ人が入力いただけます。
                        <span style="position: absolute; top: 50%; left: -6px; transform: translateY(-50%); border: 6px solid transparent; border-right-color: #333;"></span>
                    </span>
                </span>
            </h2>
            
            <div class="collapsible-content">
                <div class="form-group">
                    <label for="injury-part">傷病の部位及び傷病名</label>
                    <input type="text" id="injury-part" placeholder="例：腰部打撲" disabled>
                </div>

                <div class="form-group">
                    <label>療養の期間</label>
                    <div class="period-input-group">
                        <input type="date" id="treatment-start-date" placeholder="開始日" disabled>
                        <span class="period-separator">〜</span>
                        <input type="date" id="treatment-end-date" placeholder="終了日" disabled>
                    </div>
                </div>

                <div class="form-group">
                    <label for="treatment-days">診療実日数</label>
                    <div style="display: flex; align-items: center; gap: 0.5rem;">
                        <input type="number" id="treatment-days" placeholder="例：15" max="999" style="width: 120px;" disabled>
                        <span>日</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="treatment-status">療養の現況</label>
                    <select id="treatment-status" disabled>
                        <option value="">選択してください</option>
                        <option value="治癒（症状固定）">治癒（症状固定）</option>
                        <option value="死亡">死亡</option>
                        <option value="転医">転医</option>
                        <option value="中止">中止</option>
                        <option value="継続中">継続中</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="medical-date">記入日</label>
                    <input type="date" id="medical-date" disabled>
                </div>

                <div class="form-group">
                    <label for="hospital-address">病院又は診療所の所在地</label>
                    <div class="postal-code-group">
                        <span class="postal-mark">〒</span>
                        <input type="text" id="hospital-postal-code-1" placeholder="123" maxlength="3" disabled>
                        <span class="postal-separator">-</span>
                        <input type="text" id="hospital-postal-code-2" placeholder="4567" maxlength="4" disabled>
                        <button type="button" class="postal-address-btn" id="hospital-address-lookup" disabled>
                            <i class="fa-solid fa-search"></i>
                            住所自動入力
                        </button>
                    </div>
                    <input type="text" id="hospital-address" placeholder="例：東京都〇〇区〇〇2-3-4" style="margin-top: 0.5rem;" disabled>
                </div>

                <div class="form-group">
                    <label for="hospital-name">病院又は診療所の名称</label>
                    <input type="text" id="hospital-name" placeholder="例：〇〇病院" disabled>
                </div>

                <div class="form-group">
                    <label>病院又は診療所の担当者氏名</label>
                    <div class="name-group">
                        <input type="text" id="doctor-name-family" placeholder="田中" disabled>
                        <input type="text" id="doctor-name-given" placeholder="花子" disabled>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>電話番号</label>
                    <div class="phone-number-group">
                        <input type="tel" id="hospital-tel-1" placeholder="03" maxlength="4" disabled>
                        <span class="phone-separator">-</span>
                        <input type="tel" id="hospital-tel-2" placeholder="9876" maxlength="4" disabled>
                        <span class="phone-separator">-</span>
                        <input type="tel" id="hospital-tel-3" placeholder="5432" maxlength="4" disabled>
                    </div>
                </div>
            </div>
        </div>


        <!-- 添付ファイル -->
        <div class="form-section" id="attachment">
            <h2>
                <i class="fa-solid fa-paperclip"></i>
                添付ファイル
            </h2>
            <div class="file-upload">
                <label for="file-upload" class="file-label">
                    <i class="fa-solid fa-file"></i>
                    ファイルを選択
                </label>
                <input type="file" id="file-upload" multiple>
                <p style="margin-top: 1rem; color: #666;">ドラッグ＆ドロップでもアップロード可能です</p>
                <div id="file-list" class="file-list"></div>
            </div>
        </div>

        <!-- 回覧設定 -->
        <div class="form-section" id="circulation">
            <h2>
                <i class="fa-solid fa-envelope"></i>
                回覧設定
            </h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="employer-email">事業主メールアドレス</label>
                    <input type="email" id="employer-email" placeholder="例：employer@example.com">
                </div>
                <div class="form-group">
                    <label for="medical-search">
                        労災保険指定医療機関
                        <span class="help-icon">?
                            <span class="help-tooltip">病院名、住所、地域名などで検索できます</span>
                        </span>
                    </label>
                    <div class="medical-search-container">
                        <input type="text" id="medical-search" class="medical-search-input" placeholder="病院名、住所、地域名で検索">
                        <button type="button" class="medical-search-btn" id="medical-search-btn">
                            検索
                        </button>
                    </div>
                    <div id="medical-results" class="medical-results"></div>
                    <input type="hidden" id="selected-medical-id" value="">
                    <input type="hidden" id="selected-medical-name" value="">
                </div>
            </div>
            
            <div style="display: flex; justify-content: flex-end; margin-top: 1rem;">
                <button class="btn-outline" id="circulation-btn">
                    回覧依頼
                </button>
            </div>
        </div>

        <!-- ボタン -->
        <div class="button-container">
            <button class="btn-secondary" id="save-btn">
                <i class="fa-solid fa-floppy-disk"></i>
                一時保存
            </button>
            <div class="button-group">
                <button class="btn-layout" id="preview-btn">
                    <i class="fa-solid fa-file-lines"></i>
                    プレビュー確認
                </button>
                <button class="btn-primary" id="submit-btn" disabled style="position: relative;">
                    <i class="fa-solid fa-check"></i>
                    提出
                    <span class="submit-tooltip" style="position: absolute; bottom: 60px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #333 0%, #495057 100%); color: white; padding: 0.75rem 1rem; border-radius: 8px; font-size: 0.85rem; width: 360px; display: none; z-index: 9999; box-shadow: 0 8px 24px rgba(0,0,0,0.2); white-space: nowrap; text-align: center;">
                        提出は事業主・医療機関の記入後に押下可能となります
                        <span style="position: absolute; top: 100%; left: 50%; transform: translateX(-50%); border: 6px solid transparent; border-top-color: #333;"></span>
                    </span>
                </button>
            </div>
        </div>
        </div>
    </main>

    <!-- ローディングオーバーレイ -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
    </div>

    <!-- 保存状態表示 -->
    <div class="save-status" id="save-status">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="20 6 9 17 4 12"></polyline>
        </svg>
        保存しました
    </div>

    <!-- フッター -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>申請について</h3>
                <ul>
                    <li><a href="https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/koyou_roudou/roudoukijun/gyousei/rousai/040325-13.html" target="_blank">休業補償給付記入案内</a></li>
                    <li><a href="#">申請の流れ</a></li>
                    <li><a href="#">必要書類一覧</a></li>
                    <li><a href="#">よくある質問</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>サポート</h3>
                <ul>
                    <li><a href="#">操作マニュアル</a></li>
                    <li><a href="#">動画ガイド</a></li>
                    <li><a href="#">お問い合わせフォーム</a></li>
                    <li><a href="#">電話相談窓口</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>関連リンク</h3>
                <ul>
                    <li><a href="https://www.mhlw.go.jp/" target="_blank">厚生労働省</a></li>
                    <li><a href="#">労働基準監督署一覧</a></li>
                    <li><a href="#">労災保険制度について</a></li>
                    <li><a href="#">個人情報保護方針</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>お問い合わせ</h3>
                <p style="color: #ccc; line-height: 1.8;">
                    <i class="fa-solid fa-phone"></i>
                    0120-XXX-XXX<br>
                    平日 9:00-17:00<br>
                    土日祝日・年末年始を除く
                </p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 厚生労働省 労災申請システム. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        // ファイルアップロード処理
        const fileInput = document.getElementById('file-upload');
        const fileList = document.getElementById('file-list');
        const uploadedFiles = [];

        fileInput.addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            files.forEach(file => {
                uploadedFiles.push(file);
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="2" style="vertical-align: middle; margin-right: 8px;">
                            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                            <polyline points="13 2 13 9 20 9"></polyline>
                        </svg>
                        ${file.name} (${(file.size / 1024).toFixed(2)} KB)
                    </span>
                    <button onclick="removeFile('${file.name}')" style="background: none; border: none; color: #e74c3c; cursor: pointer;">✕</button>
                `;
                fileList.appendChild(fileItem);
            });
        });

        // ファイル削除
        function removeFile(fileName) {
            const index = uploadedFiles.findIndex(file => file.name === fileName);
            if (index > -1) {
                uploadedFiles.splice(index, 1);
                renderFileList();
            }
        }

        function renderFileList() {
            fileList.innerHTML = '';
            uploadedFiles.forEach(file => {
                const fileItem = document.createElement('div');
                fileItem.className = 'file-item';
                fileItem.innerHTML = `
                    <span>
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="2" style="vertical-align: middle; margin-right: 8px;">
                            <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path>
                            <polyline points="13 2 13 9 20 9"></polyline>
                        </svg>
                        ${file.name} (${(file.size / 1024).toFixed(2)} KB)
                    </span>
                    <button onclick="removeFile('${file.name}')" style="background: none; border: none; color: #e74c3c; cursor: pointer;">✕</button>
                `;
                fileList.appendChild(fileItem);
            });
        }

        // ドラッグ＆ドロップ
        const fileUpload = document.querySelector('.file-upload');
        
        fileUpload.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileUpload.style.borderColor = '#004292';
            fileUpload.style.backgroundColor = '#e3f2fd';
        });

        fileUpload.addEventListener('dragleave', (e) => {
            e.preventDefault();
            fileUpload.style.borderColor = '#ddd';
            fileUpload.style.backgroundColor = 'transparent';
        });

        fileUpload.addEventListener('drop', (e) => {
            e.preventDefault();
            fileUpload.style.borderColor = '#ddd';
            fileUpload.style.backgroundColor = 'transparent';
            
            const files = Array.from(e.dataTransfer.files);
            files.forEach(file => {
                uploadedFiles.push(file);
            });
            renderFileList();
        });

        // 保存機能
        document.getElementById('save-btn').addEventListener('click', function() {
            // ローディング表示
            const loadingOverlay = document.getElementById('loading-overlay');
            loadingOverlay.classList.add('show');
            
            // 実際の実装では、APIを呼び出してデータを保存
            setTimeout(() => {
                loadingOverlay.classList.remove('show');
                const saveStatus = document.getElementById('save-status');
                saveStatus.style.display = 'flex';
                setTimeout(() => {
                    saveStatus.style.display = 'none';
                }, 3000);
            }, 1000);
        });

        // バリデーション関数
        function validateForm() {
            let isValid = true;
            
            // 既存のエラーメッセージをクリア
            document.querySelectorAll('.error-message').forEach(msg => {
                msg.classList.remove('show');
            });
            document.querySelectorAll('.form-group.error').forEach(group => {
                group.classList.remove('error');
            });
            
            // 労働保険番号
            const insuranceNumberMain = document.getElementById('insurance-number-main').value;
            const insuranceNumberBranch = document.getElementById('insurance-number-branch').value;
            if (!insuranceNumberMain || !insuranceNumberBranch) {
                showError('insurance-number-main', '労働保険番号を正しく入力してください');
                isValid = false;
            }
            
            // 労働者の氏名
            const workerNameFamily = document.getElementById('worker-name-family').value;
            const workerNameGiven = document.getElementById('worker-name-given').value;
            if (!workerNameFamily || !workerNameGiven) {
                showError('worker-name-family', '労働者の氏名を入力してください');
                isValid = false;
            }
            
            // 労働者の氏名（カナ）
            const workerNameFamilyKana = document.getElementById('worker-name-family-kana').value;
            const workerNameGivenKana = document.getElementById('worker-name-given-kana').value;
            if (!workerNameFamilyKana || !workerNameGivenKana) {
                showError('worker-name-family-kana', '労働者の氏名（カナ）を入力してください');
                isValid = false;
            }
            
            // 郵便番号
            const postalCode1 = document.getElementById('worker-postal-code-1').value;
            const postalCode2 = document.getElementById('worker-postal-code-2').value;
            if (!postalCode1 || !postalCode2) {
                showError('worker-postal-code-1', '郵便番号を正しく入力してください');
                isValid = false;
            }
            
            // 労働者の住所
            const workerAddress = document.getElementById('worker-address').value;
            if (!workerAddress) {
                showError('worker-address', '労働者の住所を入力してください');
                isValid = false;
            }
            
            // 労働者の性別
            const gender = document.querySelector('input[name="gender"]:checked');
            if (!gender) {
                // 性別ラジオボタンの親要素を探してエラーを表示
                const genderRadio = document.querySelector('input[name="gender"]');
                if (genderRadio) {
                    const formGroup = genderRadio.closest('.form-group');
                    if (formGroup) {
                        formGroup.classList.add('error');
                        let errorMsg = formGroup.querySelector('.error-message');
                        if (!errorMsg) {
                            errorMsg = document.createElement('div');
                            errorMsg.className = 'error-message';
                            formGroup.appendChild(errorMsg);
                        }
                        errorMsg.textContent = '労働者の性別を選択してください';
                        errorMsg.classList.add('show');
                    }
                }
                isValid = false;
            }
            
            // 労働者の生年月日
            const birthDate = document.getElementById('birth-date');
            if (birthDate && !birthDate.value) {
                showError('birth-date', '労働者の生年月日を入力してください');
                isValid = false;
            }
            
            // 負傷又は発病年月日
            const injuryDate = document.getElementById('injury-date');
            if (injuryDate && !injuryDate.value) {
                showError('injury-date', '負傷又は発病年月日を入力してください');
                isValid = false;
            }
            
            // 療養のために労働できなかった期間
            const restStartDate = document.getElementById('rest-start-date');
            const restEndDate = document.getElementById('rest-end-date');
            if (restStartDate && restEndDate && (!restStartDate.value || !restEndDate.value)) {
                showError('rest-start-date', '療養のために労働できなかった期間を入力してください');
                isValid = false;
            }
            
            // 労働者の職種
            const workerJob = document.getElementById('worker-job');
            if (workerJob && !workerJob.value) {
                showError('worker-job', '労働者の職種を入力してください');
                isValid = false;
            }
            
            // 平均賃金
            const averageWage = document.getElementById('average-wage');
            if (averageWage && !averageWage.value) {
                showError('average-wage', '平均賃金を入力してください');
                isValid = false;
            }
            
            // 負傷又は発病の時刻
            const injuryHour = document.getElementById('injury-hour');
            const injuryMinute = document.getElementById('injury-minute');
            if (injuryHour && injuryMinute && (!injuryHour.value || !injuryMinute.value)) {
                showError('injury-hour', '負傷又は発病の時刻を入力してください');
                isValid = false;
            }
            
            // 災害の原因、発生状況及び発生当日の就労・療養状況
            const accidentDetails = document.getElementById('accident-details');
            if (accidentDetails && !accidentDetails.value) {
                showError('accident-details', '災害の原因、発生状況及び発生当日の就労・療養状況を入力してください');
                isValid = false;
            }
            
            // 振込先情報
            const bankName = document.getElementById('bank-name');
            const branchName = document.getElementById('branch-name');
            const accountNumber = document.getElementById('account-number');
            const accountHolderFamily = document.getElementById('account-holder-family');
            const accountHolderGiven = document.getElementById('account-holder-given');
            
            if (bankName && !bankName.value) {
                showError('bank-name', '金融機関名称を入力してください');
                isValid = false;
            }
            if (branchName && !branchName.value) {
                showError('branch-name', '支店名を入力してください');
                isValid = false;
            }
            if (accountNumber && !accountNumber.value) {
                showError('account-number', '口座番号を入力してください');
                isValid = false;
            }
            if (accountHolderFamily && accountHolderGiven && (!accountHolderFamily.value || !accountHolderGiven.value)) {
                showError('account-holder-family', '口座名義人（カナ）を入力してください');
                isValid = false;
            }
            
            // 回覧設定
            const employerEmail = document.getElementById('employer-email');
            const selectedMedicalName = document.getElementById('selected-medical-name');
            
            if (employerEmail && !employerEmail.value) {
                showError('employer-email', '事業主メールアドレスを入力してください');
                isValid = false;
            } else if (employerEmail && employerEmail.value && !isValidEmail(employerEmail.value)) {
                showError('employer-email', '有効なメールアドレスを入力してください');
                isValid = false;
            }
            
            if (selectedMedicalName && !selectedMedicalName.value) {
                showError('medical-search', '労災保険指定医療機関を選択してください');
                isValid = false;
            }
            
            return isValid;
        }
        
        function showError(fieldId, message) {
            const field = document.getElementById(fieldId);
            const formGroup = field.closest('.form-group');
            formGroup.classList.add('error');
            
            // エラーメッセージ要素を作成または更新
            let errorMsg = formGroup.querySelector('.error-message');
            if (!errorMsg) {
                errorMsg = document.createElement('div');
                errorMsg.className = 'error-message';
                formGroup.appendChild(errorMsg);
            }
            
            errorMsg.textContent = message;
            errorMsg.classList.add('show');
        }
        
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        // 回覧依頼ボタン
        document.getElementById('circulation-btn').addEventListener('click', function() {
            if (!validateForm()) {
                return;
            }
            
            const employerEmail = document.getElementById('employer-email').value;
            const selectedMedicalName = document.getElementById('selected-medical-name').value;
            const selectedMedicalId = document.getElementById('selected-medical-id').value;
            
            if (!selectedMedicalName) {
                alert('労災保険指定医療機関を選択してください。');
                return;
            }
            
            // ローディング表示
            const loadingOverlay = document.getElementById('loading-overlay');
            loadingOverlay.classList.add('show');
            
            // 実際の実装では、ここでAPIを呼び出して回覧依頼を送信
            setTimeout(() => {
                loadingOverlay.classList.remove('show');
                alert('回覧依頼を送信しました。\n\n事業主: ' + employerEmail + '\n医療機関: ' + selectedMedicalName + ' (指定番号: ' + selectedMedicalId + ')\n\n回覧先にメールが送信されました。');
                
                // ステップを次に進める
                const activeStep = document.querySelector('.step.active');
                activeStep.classList.remove('active');
                activeStep.classList.add('completed');
                document.querySelectorAll('.step')[1].classList.add('active');
            }, 1500);
        });

        // 提出ボタンのホバー処理
        document.getElementById('submit-btn').addEventListener('mouseenter', function() {
            if (this.disabled) {
                this.querySelector('.submit-tooltip').style.display = 'block';
            }
        });
        
        document.getElementById('submit-btn').addEventListener('mouseleave', function() {
            this.querySelector('.submit-tooltip').style.display = 'none';
        });

        // 提出ボタン
        document.getElementById('submit-btn').addEventListener('click', function() {
            // 必須項目のチェック
            let isValid = true;
            let emptyFields = [];
            
            // 労働保険番号のチェック
            const insuranceNumberMain = document.getElementById('insurance-number-main').value;
            const insuranceNumberBranch = document.getElementById('insurance-number-branch').value;
            if (!insuranceNumberMain || !insuranceNumberBranch) {
                isValid = false;
                emptyFields.push('労働保険番号');
                document.getElementById('insurance-number-main').style.borderColor = '#e74c3c';
                document.getElementById('insurance-number-branch').style.borderColor = '#e74c3c';
            } else {
                document.getElementById('insurance-number-main').style.borderColor = '#e1e8ed';
                document.getElementById('insurance-number-branch').style.borderColor = '#e1e8ed';
            }
            
            // 労働者の氏名のチェック
            const familyName = document.getElementById('worker-name-family').value;
            const givenName = document.getElementById('worker-name-given').value;
            if (!familyName || !givenName) {
                isValid = false;
                emptyFields.push('労働者の氏名');
                document.getElementById('worker-name-family').style.borderColor = '#e74c3c';
                document.getElementById('worker-name-given').style.borderColor = '#e74c3c';
            } else {
                document.getElementById('worker-name-family').style.borderColor = '#e1e8ed';
                document.getElementById('worker-name-given').style.borderColor = '#e1e8ed';
            }
            
            // 労働者の氏名（カナ）のチェック
            const familyNameKana = document.getElementById('worker-name-family-kana').value;
            const givenNameKana = document.getElementById('worker-name-given-kana').value;
            if (!familyNameKana || !givenNameKana) {
                isValid = false;
                emptyFields.push('労働者の氏名（カナ）');
                document.getElementById('worker-name-family-kana').style.borderColor = '#e74c3c';
                document.getElementById('worker-name-given-kana').style.borderColor = '#e74c3c';
            } else {
                document.getElementById('worker-name-family-kana').style.borderColor = '#e1e8ed';
                document.getElementById('worker-name-given-kana').style.borderColor = '#e1e8ed';
            }
            
            // 郵便番号のチェック
            const postalCode1 = document.getElementById('worker-postal-code-1').value;
            const postalCode2 = document.getElementById('worker-postal-code-2').value;
            if (!postalCode1 || !postalCode2) {
                isValid = false;
                emptyFields.push('郵便番号');
                document.getElementById('worker-postal-code-1').style.borderColor = '#e74c3c';
                document.getElementById('worker-postal-code-2').style.borderColor = '#e74c3c';
            } else {
                document.getElementById('worker-postal-code-1').style.borderColor = '#e1e8ed';
                document.getElementById('worker-postal-code-2').style.borderColor = '#e1e8ed';
            }
            
            // その他の必須項目のチェック
            const requiredFields = [
                'worker-address', 'injury-date', 'rest-start-date', 'rest-end-date',
                'worker-job', 'average-wage', 'accident-details',
                'bank-name', 'branch-name', 'account-number'
            ];
            
            requiredFields.forEach(fieldId => {
                const input = document.getElementById(fieldId);
                if (input && !input.value) {
                    isValid = false;
                    input.style.borderColor = '#e74c3c';
                    emptyFields.push(input.previousElementSibling.textContent || fieldId);
                } else if (input) {
                    input.style.borderColor = '#e1e8ed';
                }
            });
            
            // 口座名義人のチェック
            const holderFamily = document.getElementById('account-holder-family').value;
            const holderGiven = document.getElementById('account-holder-given').value;
            if (!holderFamily || !holderGiven) {
                isValid = false;
                emptyFields.push('口座名義人（カナ）');
                document.getElementById('account-holder-family').style.borderColor = '#e74c3c';
                document.getElementById('account-holder-given').style.borderColor = '#e74c3c';
            } else {
                document.getElementById('account-holder-family').style.borderColor = '#e1e8ed';
                document.getElementById('account-holder-given').style.borderColor = '#e1e8ed';
            }
            
            // ラジオボタンのチェック
            const radioChecked = document.querySelector('input[name="gender"]:checked');
            if (!radioChecked) {
                isValid = false;
                emptyFields.push('労働者の性別');
            }
            
            // 時刻の必須チェック
            const injuryHour = document.getElementById('injury-hour').value;
            const injuryMinute = document.getElementById('injury-minute').value;
            if (!injuryHour || !injuryMinute) {
                isValid = false;
                emptyFields.push('負傷又は発病の時刻');
                document.getElementById('injury-hour').style.borderColor = '#e74c3c';
                document.getElementById('injury-minute').style.borderColor = '#e74c3c';
            }
            
            if (!isValid) {
                alert('以下の必須項目を入力してください：\n\n' + emptyFields.join('\n'));
                return;
            }
            
            // 実際の実装では、ここでAPIを呼び出して申請を送信
            if (confirm('申請内容を確認して提出しますか？\n\n提出後は内容の変更ができません。')) {
                // ローディング表示
                const loadingOverlay = document.getElementById('loading-overlay');
                loadingOverlay.classList.add('show');
                
                setTimeout(() => {
                    loadingOverlay.classList.remove('show');
                    alert('申請を提出しました。\n\n申請番号: R6-123456\n\n申請内容は登録されたメールアドレスに送信されました。');
                    
                    // 完了画面への遷移など
                    window.location.href = '#completed';
                }, 2000);
            }
        });

        // フォーカス時のアニメーション
        const inputs = document.querySelectorAll('input, select, textarea');
        inputs.forEach(input => {
            input.addEventListener('focus', function() {
                if (!this.disabled) {
                    this.parentElement.style.transform = 'translateX(2px)';
                }
            });
            
            input.addEventListener('blur', function() {
                this.parentElement.style.transform = 'translateX(0)';
            });
        });

        // 自動保存機能（5分ごと）
        setInterval(() => {
            // 実際の実装では、APIを呼び出してデータを自動保存
            console.log('自動保存を実行しました');
        }, 300000);

        // ユーザータイプに応じて入力可能フィールドを制御
        function setUserType(userType) {
            if (userType === 'worker') {
                // 被災労働者は自分の情報のみ編集可能
                document.querySelectorAll('#employer-date, #business-name, #business-address, #employer-name, #employer-tel').forEach(el => {
                    el.disabled = true;
                });
                document.querySelectorAll('#injury-part, #treatment-start-date, #treatment-end-date, #medical-progress, #medical-date, #hospital-address, #hospital-name, #doctor-name, #hospital-tel').forEach(el => {
                    el.disabled = true;
                });
            }
        }

        // 折りたたみ機能
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            section.classList.toggle('collapsed');
        }
        
        // プログレスナビゲーションのクリック処理
        function navigateToSection(sectionId) {
            // 対象セクションまでスクロール
            const targetSection = document.getElementById(sectionId);
            if (targetSection) {
                targetSection.scrollIntoView({ behavior: 'smooth' });
                
                // 事業主記入欄または医療機関記入欄の場合、折りたたみを展開
                if (sectionId === 'employer-section' || sectionId === 'medical-section') {
                    if (targetSection.classList.contains('collapsed')) {
                        targetSection.classList.remove('collapsed');
                    }
                }
            }
            
            // プログレスナビゲーションのアクティブ状態を更新
            document.querySelectorAll('.progress-step').forEach(step => {
                step.classList.remove('active');
            });
            
            const clickedStep = document.querySelector(`[data-section="${sectionId}"]`);
            if (clickedStep) {
                clickedStep.classList.add('active');
            }
        }

        // 郵便番号から住所を自動取得する機能
        async function lookupAddress(postalCode1, postalCode2, addressFieldId) {
            if (!postalCode1 || !postalCode2) {
                alert('郵便番号を正しく入力してください。');
                return;
            }
            
            // 7桁の郵便番号を作成
            const zipCode = postalCode1 + postalCode2;
            
            try {
                // zipcloud APIを使用して住所を取得
                const response = await fetch(`https://zipcloud.ibsnet.co.jp/api/search?zipcode=${zipCode}`);
                const data = await response.json();
                
                if (data.status === 200 && data.results && data.results.length > 0) {
                    const result = data.results[0];
                    const fullAddress = result.address1 + result.address2 + result.address3;
                    
                    // 住所フィールドに自動入力
                    document.getElementById(addressFieldId).value = fullAddress;
                    
                    // 成功メッセージを表示
                    const saveStatus = document.getElementById('save-status');
                    saveStatus.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                        住所を自動入力しました
                    `;
                    saveStatus.style.display = 'flex';
                    setTimeout(() => {
                        saveStatus.style.display = 'none';
                    }, 3000);
                } else {
                    alert('該当する住所が見つかりませんでした。郵便番号を確認してください。');
                }
            } catch (error) {
                console.error('住所検索エラー:', error);
                alert('住所検索中にエラーが発生しました。しばらくしてから再度お試しください。');
            }
        }
        
        // 労働者住所の自動入力ボタン
        document.getElementById('worker-address-lookup').addEventListener('click', function() {
            const postalCode1 = document.getElementById('worker-postal-code-1').value;
            const postalCode2 = document.getElementById('worker-postal-code-2').value;
            lookupAddress(postalCode1, postalCode2, 'worker-address');
        });
        
        // 事業所住所の自動入力ボタン
        document.getElementById('business-address-lookup').addEventListener('click', function() {
            const postalCode1 = document.getElementById('business-postal-code-1').value;
            const postalCode2 = document.getElementById('business-postal-code-2').value;
            lookupAddress(postalCode1, postalCode2, 'business-address');
        });
        
        // 病院住所の自動入力ボタン
        document.getElementById('hospital-address-lookup').addEventListener('click', function() {
            const postalCode1 = document.getElementById('hospital-postal-code-1').value;
            const postalCode2 = document.getElementById('hospital-postal-code-2').value;
            lookupAddress(postalCode1, postalCode2, 'hospital-address');
        });
        
        // 郵便番号入力時の自動フォーカス移動
        document.getElementById('worker-postal-code-1').addEventListener('input', function() {
            if (this.value.length === 3) {
                document.getElementById('worker-postal-code-2').focus();
            }
        });
        
        document.getElementById('business-postal-code-1').addEventListener('input', function() {
            if (this.value.length === 3) {
                document.getElementById('business-postal-code-2').focus();
            }
        });
        
        document.getElementById('hospital-postal-code-1').addEventListener('input', function() {
            if (this.value.length === 3) {
                document.getElementById('hospital-postal-code-2').focus();
            }
        });
        
        // 郵便番号入力時の数字のみ制限
        function restrictToNumbers(inputElement) {
            inputElement.addEventListener('input', function(e) {
                this.value = this.value.replace(/[^0-9]/g, '');
            });
        }
        
        // 全ての郵便番号入力フィールドに数字制限を適用
        restrictToNumbers(document.getElementById('worker-postal-code-1'));
        restrictToNumbers(document.getElementById('worker-postal-code-2'));
        restrictToNumbers(document.getElementById('business-postal-code-1'));
        restrictToNumbers(document.getElementById('business-postal-code-2'));
        restrictToNumbers(document.getElementById('hospital-postal-code-1'));
        restrictToNumbers(document.getElementById('hospital-postal-code-2'));

        // 労災保険指定医療機関データ（厚生労働省公式サイトより）
        const medicalInstitutions = [
            {
                id: "0511757",
                name: "医療法人東京堂港町歯科クリニック",
                postalCode: "011-0946",
                address: "秋田市土崎港中央３丁目５－４０",
                phone: "018-857-1040",
                region: "秋田県",
                type: "歯科診療所"
            },
            {
                id: "0832081",
                name: "東京医科大学茨城医療センター",
                postalCode: "300-0395",
                address: "稲敷郡阿見町中央３－２０－１",
                phone: "029-887-1161",
                region: "茨城県",
                type: "総合病院"
            },
            {
                id: "1125354",
                name: "学校法人　ＳＢＣ東京医療大学附属　上青木整形外科",
                postalCode: "333-0845",
                address: "川口市上青木西４－１４－１２",
                phone: "048-264-3232",
                region: "埼玉県",
                type: "整形外科"
            },
            {
                id: "1165411",
                name: "医療法人財団　東京勤労者医療会　みさとメンタルクリニック",
                postalCode: "341-0038",
                address: "三郷市中央１－１６－１　みさと中央医療福祉ビル３Ｆ",
                phone: "048-953-6108",
                region: "埼玉県",
                type: "精神科診療所"
            },
            {
                id: "1165925",
                name: "医療法人財団東京勤労者医療会みさと協立病院",
                postalCode: "341-0016",
                address: "三郷市田中新田２７３－１",
                phone: "048-959-1811",
                region: "埼玉県",
                type: "総合病院"
            },
            {
                id: "1174762",
                name: "医療法人社団仁岳会西東京歯科医院飯能分院",
                postalCode: "357-0038",
                address: "飯能市仲町２－２馬場ビル１Ｆ",
                phone: "042-974-1033",
                region: "埼玉県",
                type: "歯科診療所"
            },
            {
                id: "1214063",
                name: "医療法人社団葵会東京ベイ先端医療幕張クリニック",
                postalCode: "261-0024",
                address: "千葉市美浜区豊砂１－１７",
                phone: "043-299-2000",
                region: "千葉県",
                type: "診療所"
            },
            {
                id: "1214349",
                name: "医療法人社団クリノヴェイション東京ビジネスクリニック千葉エキナカ",
                postalCode: "260-0031",
                address: "千葉市中央区新千葉１－１－１ペリエ千葉エキナカ４階",
                phone: "043-215-8111",
                region: "千葉県",
                type: "診療所"
            },
            {
                id: "1214659",
                name: "東京ビジネスクリニックファミリアペリエ千葉",
                postalCode: "260-0031",
                address: "千葉市中央区新千葉１－１－１ペリエ千葉６階",
                phone: "043-306-8675",
                region: "千葉県",
                type: "診療所"
            },
            {
                id: "1220021",
                name: "学校法人東京歯科大学市川総合病院",
                postalCode: "272-0824",
                address: "市川市菅野５－１１－１３",
                phone: "047-322-0151",
                region: "千葉県",
                type: "総合病院"
            },
            {
                id: "1223771",
                name: "学校法人東京女子医科大学附属八千代医療センター",
                postalCode: "276-8524",
                address: "八千代市大和田新田４７７－９６",
                phone: "047-450-6000",
                region: "千葉県",
                type: "総合病院"
            },
            {
                id: "1223810",
                name: "医療法人社団保健会東京湾岸リハビリテーション病院",
                postalCode: "275-0026",
                address: "習志野市谷津４－１－１",
                phone: "047-453-9000",
                region: "千葉県",
                type: "リハビリテーション病院"
            },
            {
                id: "1224123",
                name: "東京ベイ・浦安市川医療センター",
                postalCode: "279-0001",
                address: "浦安市当代島３－４－３２",
                phone: "047-351-3101",
                region: "千葉県",
                type: "総合病院"
            },
            {
                id: "1224646",
                name: "医療法人社団志友会東京ベイサイドクリニック",
                postalCode: "273-0012",
                address: "船橋市浜町２－１－１ららぽーとＴ０ＫＹ０－ＢＡＹ西館３階",
                phone: "047-495-0013",
                region: "千葉県",
                type: "診療所"
            },
            {
                id: "1225863",
                name: "学校法人　ＳＢＣ東京医療大学附属高洲整形外科",
                postalCode: "279-0023",
                address: "浦安市高洲２－４－１０インシップビル２階",
                phone: "047-380-5050",
                region: "千葉県",
                type: "整形外科"
            },
            {
                id: "1230476",
                name: "医療法人社団誠馨会　新東京クリニック",
                postalCode: "271-0077",
                address: "松戸市根本４７３－１",
                phone: "047-366-7000",
                region: "千葉県",
                type: "診療所"
            },
            {
                id: "1230921",
                name: "医療法人杜団　誠馨会　新東京クリニック松飛台",
                postalCode: "270-2215",
                address: "松戸市串崎南町２７番地",
                phone: "047-384-3111",
                region: "千葉県",
                type: "診療所"
            },
            {
                id: "1231103",
                name: "（医財）東京勤労者医療会東葛病院",
                postalCode: "270-0153",
                address: "流山市中１０２",
                phone: "04-7159-1011",
                region: "千葉県",
                type: "総合病院"
            },
            {
                id: "1231332",
                name: "学校法人慈恵大学東京慈恵会医科大学附属柏病院",
                postalCode: "277-8567",
                address: "柏市柏下１６３－１",
                phone: "04-7164-1111",
                region: "千葉県",
                type: "総合病院"
            },
            {
                id: "1231723",
                name: "医療法人財団東京勤労者医療会野田南部診療所",
                postalCode: "278-0022",
                address: "野田市山崎１７３７－２",
                phone: "04-7121-0171",
                region: "千葉県",
                type: "診療所"
            },
            {
                id: "1231987",
                name: "医療法人財団東京勤労者医療会東葛病院付属診療所",
                postalCode: "270-0174",
                address: "流山市下花輪４０９－６",
                phone: "04-7158-7710",
                region: "千葉県",
                type: "診療所"
            },
            {
                id: "1232428",
                name: "医療法人社団誠馨会　新東京ハートクリニック",
                postalCode: "271-0077",
                address: "松戸市根本４７４ー１",
                phone: "047-366-3333",
                region: "千葉県",
                type: "専門診療所"
            },
            {
                id: "1232941",
                name: "医療法人財団東京勤労者医療会東葛歯科",
                postalCode: "270-0174",
                address: "流山市下花輪４０９－６",
                phone: "04-7159-6775",
                region: "千葉県",
                type: "歯科診療所"
            },
            {
                id: "1233386",
                name: "医療法人財団東京勤労者医療会新松戸診療所",
                postalCode: "270-0034",
                address: "松戸市新松戸４－２",
                phone: "047-343-9271",
                region: "千葉県",
                type: "診療所"
            },
            {
                id: "1233602",
                name: "医療法人社団誠馨会　新東京病院",
                postalCode: "270-2232",
                address: "松戸市和名ヶ谷１２７１番地",
                phone: "047-711-8700",
                region: "千葉県",
                type: "総合病院"
            },
            {
                id: "1233963",
                name: "医療法人財団東京勤労者医療会東葛病院付属流山セントラルパーク駅前診療所",
                postalCode: "270-0152",
                address: "流山市前平井１５５",
                phone: "04-7157-0100",
                region: "千葉県",
                type: "診療所"
            },
            {
                id: "1300016",
                name: "独立行政法人労働者健康安全機構東京労災病院",
                postalCode: "143-0013",
                address: "大田区大森南４－１３－２１",
                phone: "03-3742-7301",
                region: "東京都",
                type: "労災病院"
            },
            {
                id: "1301021",
                name: "医療法人社団　ＢＲＡＩＶＥ　東京ホームクリニック",
                postalCode: "160-0011",
                address: "新宿区若葉２丁目１２番地２　モンヴェール四ツ谷１０２",
                phone: "03-5990-2813",
                region: "東京都",
                type: "診療所"
            },
            {
                id: "1301179",
                name: "東京メディカルテラス",
                postalCode: "107-0061",
                address: "港区北青山２－１３－４　青山ＭＹビル４階",
                phone: "03-6721-1899",
                region: "東京都",
                type: "診療所"
            },
            {
                id: "1310054",
                name: "東京都神津島村国民健康保険直営診療所",
                postalCode: "100-0601",
                address: "東京都神津島村１００９番地１",
                phone: "04992-8-1121",
                region: "東京都",
                type: "公立診療所"
            }
        ];

        // 医療機関検索機能
        function searchMedicalInstitutions(query) {
            if (!query || query.trim() === '') {
                return [];
            }
            
            const searchTerm = query.toLowerCase().trim();
            return medicalInstitutions.filter(institution => {
                return institution.name.toLowerCase().includes(searchTerm) ||
                       institution.address.toLowerCase().includes(searchTerm) ||
                       institution.region.toLowerCase().includes(searchTerm) ||
                       institution.type.toLowerCase().includes(searchTerm);
            });
        }

        // 検索結果を表示
        function displayMedicalResults(results) {
            const resultsContainer = document.getElementById('medical-results');
            
            if (results.length === 0) {
                resultsContainer.innerHTML = '<div style="padding: 1rem; text-align: center; color: #666;">検索結果が見つかりませんでした</div>';
                resultsContainer.style.display = 'block';
                return;
            }
            
            resultsContainer.innerHTML = results.map(institution => `
                <div class="medical-result-item" data-id="${institution.id}" data-name="${institution.name}">
                    <div class="medical-result-name">${institution.name}</div>
                    <div class="medical-result-info">
                        〒${institution.postalCode} ${institution.address}<br>
                        TEL: ${institution.phone} | ${institution.type}
                    </div>
                    <div class="medical-result-id">指定番号: ${institution.id}</div>
                </div>
            `).join('');
            
            resultsContainer.style.display = 'block';
            
            // 各結果項目にクリックイベントを追加
            resultsContainer.querySelectorAll('.medical-result-item').forEach(item => {
                item.addEventListener('click', function() {
                    const id = this.getAttribute('data-id');
                    const name = this.getAttribute('data-name');
                    
                    // 選択状態を更新
                    resultsContainer.querySelectorAll('.medical-result-item').forEach(i => i.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    // 隠しフィールドに値を設定
                    document.getElementById('selected-medical-id').value = id;
                    document.getElementById('selected-medical-name').value = name;
                    
                    // 検索入力欄に選択した医療機関名を表示
                    document.getElementById('medical-search').value = name;
                    
                    // 結果リストを非表示
                    setTimeout(() => {
                        resultsContainer.style.display = 'none';
                    }, 200);
                    
                    // 成功メッセージを表示
                    const saveStatus = document.getElementById('save-status');
                    saveStatus.innerHTML = `
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20 6 9 17 4 12"></polyline>
                        </svg>
                        医療機関を選択しました
                    `;
                    saveStatus.style.display = 'flex';
                    setTimeout(() => {
                        saveStatus.style.display = 'none';
                    }, 3000);
                });
            });
        }

        // 医療機関検索ボタンのイベント
        document.getElementById('medical-search-btn').addEventListener('click', function() {
            const query = document.getElementById('medical-search').value;
            const results = searchMedicalInstitutions(query);
            displayMedicalResults(results);
        });

        // 検索入力欄でEnterキーを押した時の処理
        document.getElementById('medical-search').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                e.preventDefault();
                document.getElementById('medical-search-btn').click();
            }
        });

        // 検索入力欄以外をクリックした時に結果を非表示
        document.addEventListener('click', function(e) {
            const searchContainer = document.querySelector('.medical-search-container');
            const resultsContainer = document.getElementById('medical-results');
            
            if (!searchContainer.contains(e.target) && !resultsContainer.contains(e.target)) {
                resultsContainer.style.display = 'none';
            }
        });

        // プレビュー確認ボタンのイベントリスナー
        document.getElementById('preview-btn').addEventListener('click', function() {
            window.open('preview.html', '_blank', 'width=1200,height=800');
        });

        // プログレスナビゲーション機能
        function updateProgressNavigation() {
            const sections = document.querySelectorAll('.form-section');
            const progressSteps = document.querySelectorAll('.progress-step');
            
            // 現在のスクロール位置を取得
            const scrollPosition = window.scrollY + 100;
            
            let currentSection = null;
            
            // どのセクションが現在表示されているかを判定
            sections.forEach((section, index) => {
                const rect = section.getBoundingClientRect();
                const sectionTop = rect.top + window.scrollY;
                const sectionBottom = sectionTop + rect.height;
                
                if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
                    currentSection = section.id;
                }
            });
            
            // プログレスステップの状態を更新
            progressSteps.forEach(step => {
                const stepSection = step.getAttribute('data-section');
                step.classList.remove('active', 'completed');
                
                if (stepSection === currentSection) {
                    step.classList.add('active');
                } else {
                    // 完了状態の判定（簡易版）
                    const section = document.getElementById(stepSection);
                    if (section) {
                        const rect = section.getBoundingClientRect();
                        const sectionTop = rect.top + window.scrollY;
                        if (scrollPosition > sectionTop + 100) {
                            step.classList.add('completed');
                        }
                    }
                }
            });
        }
        
        // スクロールイベントリスナー
        window.addEventListener('scroll', updateProgressNavigation);
        
        // プログレスステップクリック時のスムーススクロール
        document.querySelectorAll('.progress-step').forEach(step => {
            step.addEventListener('click', function() {
                const targetSection = this.getAttribute('data-section');
                const targetElement = document.getElementById(targetSection);
                
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // 初期状態でプログレスナビゲーションを更新
        updateProgressNavigation();

        // 初期設定（被災労働者としてログイン）
        setUserType('worker');
    </script>
</body>
</html>