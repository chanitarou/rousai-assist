# CLAUDE.md

このファイルは、このリポジトリでコードを扱う際のClaude Code (claude.ai/code)へのガイダンスを提供します。

## プロジェクト概要

これは日本の労働者災害補償（労災）申請支援システムのプロトタイプです。このプロジェクトは、複数関係者によるフォーム提出システムの包括的なモックアップとして機能する単一のHTMLファイルを含んでいます。

**プロジェクトタイプ**: 静的HTML/CSS/JavaScriptウェブアプリケーション  
**現在のメインファイル**: `労災アシスト申請画面モック_ver0.02.html`  
**対象ユーザー**: 被災労働者、事業主、医療機関

## 開発コマンド

これは静的HTMLプロトタイプであるため、ビルドスクリプト、テストコマンド、リンティングツールは設定されていません。プロジェクトは以下の方法で開発できます：

1. **アプリケーションの表示**: `労災アシスト申請画面モック_ver0.02.html`をウェブブラウザで開く
2. **開発**: HTMLファイルを直接編集する - 全てのHTML、CSS、JavaScriptが1つのファイルに含まれている
3. **テスト**: ウェブブラウザでの手動テスト（自動テストフレームワークなし）

## 現在のプロジェクト状況

### 最新の変更点（v0.02での改善）
- **左側プログレスナビゲーション**: 7つのセクションでフォーム入力を段階的に案内
- **クリック可能なナビゲーション**: 各ステップをクリックして該当セクションに移動
- **自動展開機能**: 事業主記入欄・医療機関記入欄クリック時に自動で折りたたみを展開
- **モダンなデザイン**: 洗練されたUIデザインとアニメーション
- **進捗追跡**: 各セクションの完了状況を視覚的に表示
- **折りたたみ可能セクション**: 事業主記入欄と医療機関記入欄は初期状態では折りたたまれている
- **シンプルなレイアウト**: 複雑なフロー表示を削除し、分かりやすい構成に変更

### 削除された機能
- **全体フロー表示**: 労災申請全体の流れセクションは削除（煩雑さを避けるため）
- **完了状態の緑線**: プログレスナビゲーションの完了状態を示す緑色の線を削除

## アーキテクチャ

### 単一ファイル構造
アプリケーション全体が1つのHTMLファイルに含まれています：
- **HTML**: セマンティック要素を使用したフォーム構造
- **CSS**: モダンなレスポンシブデザインの埋め込みスタイル
- **JavaScript**: フォームインタラクションと検証のためのVanilla ES6+

### 主要レイアウト構成

#### ヘッダー
- 政府スタイルのヘッダーデザイン
- 労災申請システムのブランディング
- ユーザー情報とログアウト機能

#### ブレッドクラム
- 現在の画面位置を表示
- ナビゲーション支援

#### メインコンテンツ
- **左側**: プログレスナビゲーション（280px幅、sticky配置）
- **右側**: メインフォームコンテンツ（flex: 1）

### プログレスナビゲーション
現在7つのセクションで構成：
1. **労働者情報**: 基本情報と労働保険番号
2. **災害情報**: 事故発生日時と詳細
3. **振込先情報**: 給付金受取口座
4. **事業主記入欄**: 事業主による証明（折りたたみ）
5. **医療機関記入欄**: 医師による診断証明（折りたたみ）
6. **添付ファイル**: 必要書類の添付
7. **回覧設定**: 事業主・医療機関設定

### 主要コンポーネント

#### ユーザーロールとワークフロー
1. **被災労働者**: 申請を開始し、個人情報/負傷情報を入力し、他者に回覧し、最終申請を提出
2. **事業主**: 回覧依頼を受け取った後、事業情報を入力
3. **医療機関**: 医療情報と治療詳細を提供

#### フォームセクション
- **労働者情報**: 氏名、住所、性別、生年月日、職種、平均賃金
- **災害情報**: 負傷日時、療養期間、災害状況詳細
- **振込先情報**: 銀行口座情報
- **事業主記入欄**: 事業情報、事業主氏名、連絡先
- **医療機関記入欄**: 傷病名、療養期間、診療情報、医療機関詳細
- **添付ファイル**: ドラッグ&ドロップ対応
- **回覧設定**: メールアドレス、医療機関検索機能

#### インタラクティブ機能
- **進捗ナビゲーション**: 現在のセクションをアクティブ状態で表示
- **ナビゲーションクリック**: プログレスステップをクリックして該当セクションに移動
- **スムーズスクロール**: 対象セクションまでのスムーズなスクロール機能
- **自動展開機能**: 折りたたみセクション（事業主・医療機関記入欄）の自動展開
- **折りたたみセクション**: 事業主・医療機関記入欄の表示/非表示
- **自動保存機能**: フォームデータが定期的にlocalStorageに保存
- **フォーム検証**: 視覚的フィードバック付きクライアント側検証
- **レスポンシブデザイン**: モバイルフレンドリーなレイアウト
- **ヘルプツールチップ**: 各フィールドの説明機能

### 技術実装

#### データ管理
- **localStorage**: 自動保存とフォーム永続化に使用
- **フォーム検証**: エラーハイライト付きカスタムJavaScript検証
- **状態管理**: ロールベースUI状態変更

#### UI/UX機能
- **政府スタイルデザイン**: プロフェッショナルな青色カラースキーム（#004292）
- **アクセシビリティ**: 適切なラベル、セマンティックHTML、キーボードナビゲーション
- **アニメーション**: 微細なCSSトランジションとローディング状態
- **モバイルレスポンシブ**: FlexboxとCSS Gridレイアウト
- **ヘルプシステム**: ?マークアイコンによるツールチップ表示

## 開発ガイドライン

### コードスタイル
- モダンなES6+ JavaScript構文を使用
- CSSはBEM様の命名規則に従う
- アクセシビリティのためのセマンティックHTML5要素
- 一貫したインデント（4スペース）

### フォームフィールドパターン
- **個人名**: 姓/名フィールドに分割
- **住所**: 郵便番号 + 住所テキスト + 自動住所入力ボタン
- **日付**: 検証付きHTML5日付入力
- **時刻**: ドロップダウンセレクト（時/分）
- **電話番号**: 分割入力フィールド（市外局番-市内局番-加入者番号）
- **銀行口座**: 検証付き構造化入力
- **労働保険番号**: メイン番号-枝番号の分割入力

### 重要なUI要素
- **プログレスナビゲーション**: sticky配置、アクティブ状態表示、クリック可能
- **折りたたみセクション**: クリック可能なヘッダーとアニメーション
- **フォーム検証**: リアルタイムエラー表示
- **ヘルプツールチップ**: ホバー時の説明表示

### 主要関数
- `toggleSection()`: セクションの折りたたみ/展開
- `navigateToSection()`: プログレスナビゲーションクリック時の処理（スクロール・自動展開・アクティブ状態更新）
- `validateForm()`: 包括的フォーム検証
- `saveFormData()`: 自動保存機能
- `showError()`: エラーメッセージ表示システム

## 重要な注意事項

- **バックエンド統合なし**: これはフロントエンドのみのモックアップ
- **認証なし**: ユーザーロールはUIボタンでシミュレート
- **データベースなし**: 全データはlocalStorageに保存
- **日本語言語**: 全てのUIテキストと検証メッセージは日本語
- **政府準拠**: 日本政府のフォーム基準に合わせた設計

## ファイル構造

```
C:\Users\rtani\ClaudeCode\RosaiAssist\
├── 労災アシスト申請画面モック_ver0.02.html  # 現在のメインアプリケーションファイル
├── CLAUDE.md                              # このファイル
└── test_project/                          # 旧バージョンのファイル
    ├── 労災アシスト申請画面モック_ver0.01.html
    ├── past_prompt.txt
    └── images.png
```

## 開発時の注意点

### UIデザインの原則
- **シンプルさ**: 複雑なフロー表示を避け、必要最小限の情報のみ表示
- **視認性**: 十分なコントラストと適切なフォントサイズを維持
- **一貫性**: 全体を通じて統一されたデザイン言語
- **レスポンシブ**: モバイルデバイスでも使いやすいレイアウト

### 状態管理
- **プログレス状態**: 現在のセクション位置を明確に表示
- **フォーム状態**: 入力データの永続化と復元
- **エラー状態**: 明確なエラーメッセージとハイライト

## 今後の開発方針

1. **機能拡張**: 必要に応じて新しいフォームフィールドや機能を追加
2. **アクセシビリティ向上**: WCAG準拠のさらなる改善
3. **パフォーマンス最適化**: 大量データ処理時の最適化
4. **モバイル対応強化**: タッチデバイスでの操作性向上

## 要件参照

元の要件は `test_project/past_prompt.txt` に記載されており、以下を指定しています：
- 複数関係者ワークフロー（被災労働者 → 事業主 → 医療機関 → 提出）
- 各ユーザーロールの特定フォームフィールド
- メールベース回覧システム
- 政府スタイルUIデザイン
- アクセシビリティとユーザビリティの重視